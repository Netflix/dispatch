"""Adds on delete cascade to case association objects

Revision ID: 0785dceb3373
Revises: 847ff5e1f81c
Create Date: 2022-07-29 11:03:34.558376

"""
from alembic import op

# revision identifiers, used by Alembic.
revision = "0785dceb3373"
down_revision = "847ff5e1f81c"
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_constraint(
        "assoc_case_case_priority_case_id_fkey", "assoc_case_case_priority", type_="foreignkey"
    )
    op.drop_constraint(
        "assoc_case_case_priority_case_priority_id_fkey",
        "assoc_case_case_priority",
        type_="foreignkey",
    )
    op.create_foreign_key(
        None, "assoc_case_case_priority", "case", ["case_id"], ["id"], ondelete="CASCADE"
    )
    op.create_foreign_key(
        None,
        "assoc_case_case_priority",
        "case_priority",
        ["case_priority_id"],
        ["id"],
        ondelete="CASCADE",
    )
    op.drop_constraint(
        "assoc_case_case_severity_case_id_fkey", "assoc_case_case_severity", type_="foreignkey"
    )
    op.drop_constraint(
        "assoc_case_case_severity_case_severity_id_fkey",
        "assoc_case_case_severity",
        type_="foreignkey",
    )
    op.create_foreign_key(
        None,
        "assoc_case_case_severity",
        "case_severity",
        ["case_severity_id"],
        ["id"],
        ondelete="CASCADE",
    )
    op.create_foreign_key(
        None, "assoc_case_case_severity", "case", ["case_id"], ["id"], ondelete="CASCADE"
    )
    op.drop_constraint(
        "assoc_case_case_type_case_id_fkey", "assoc_case_case_type", type_="foreignkey"
    )
    op.drop_constraint(
        "assoc_case_case_type_case_type_id_fkey", "assoc_case_case_type", type_="foreignkey"
    )
    op.create_foreign_key(
        None, "assoc_case_case_type", "case", ["case_id"], ["id"], ondelete="CASCADE"
    )
    op.create_foreign_key(
        None, "assoc_case_case_type", "case_type", ["case_type_id"], ["id"], ondelete="CASCADE"
    )
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_constraint(None, "assoc_case_case_type", type_="foreignkey")
    op.drop_constraint(None, "assoc_case_case_type", type_="foreignkey")
    op.create_foreign_key(
        "assoc_case_case_type_case_type_id_fkey",
        "assoc_case_case_type",
        "case_type",
        ["case_type_id"],
        ["id"],
    )
    op.create_foreign_key(
        "assoc_case_case_type_case_id_fkey", "assoc_case_case_type", "case", ["case_id"], ["id"]
    )
    op.drop_constraint(None, "assoc_case_case_severity", type_="foreignkey")
    op.drop_constraint(None, "assoc_case_case_severity", type_="foreignkey")
    op.create_foreign_key(
        "assoc_case_case_severity_case_severity_id_fkey",
        "assoc_case_case_severity",
        "case_severity",
        ["case_severity_id"],
        ["id"],
    )
    op.create_foreign_key(
        "assoc_case_case_severity_case_id_fkey",
        "assoc_case_case_severity",
        "case",
        ["case_id"],
        ["id"],
    )
    op.drop_constraint(None, "assoc_case_case_priority", type_="foreignkey")
    op.drop_constraint(None, "assoc_case_case_priority", type_="foreignkey")
    op.create_foreign_key(
        "assoc_case_case_priority_case_priority_id_fkey",
        "assoc_case_case_priority",
        "case_priority",
        ["case_priority_id"],
        ["id"],
    )
    op.create_foreign_key(
        "assoc_case_case_priority_case_id_fkey",
        "assoc_case_case_priority",
        "case",
        ["case_id"],
        ["id"],
    )
    # ### end Alembic commands ###
