--
-- PostgreSQL database dump
--

-- Dumped from database version 13.0 (Debian 13.0-1.pgdg100+1)
-- Dumped by pg_dump version 13.1 (Ubuntu 13.1-1.pgdg20.10+1)

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: tsq_state; Type: TYPE; Schema: public; Owner: dispatch
--

CREATE TYPE public.tsq_state AS (
	search_query text,
	parentheses_stack integer,
	skip_for integer,
	current_token text,
	current_index integer,
	current_char text,
	previous_char text,
	tokens text[]
);


ALTER TYPE public.tsq_state OWNER TO dispatch;

--
-- Name: array_nremove(anyarray, anyelement, integer); Type: FUNCTION; Schema: public; Owner: dispatch
--

CREATE FUNCTION public.array_nremove(anyarray, anyelement, integer) RETURNS anyarray
    LANGUAGE sql IMMUTABLE
    AS $_$
    WITH replaced_positions AS (
        SELECT UNNEST(
            CASE
            WHEN $2 IS NULL THEN
                '{}'::int[]
            WHEN $3 > 0 THEN
                (array_positions($1, $2))[1:$3]
            WHEN $3 < 0 THEN
                (array_positions($1, $2))[
                    (cardinality(array_positions($1, $2)) + $3 + 1):
                ]
            ELSE
                '{}'::int[]
            END
        ) AS position
    )
    SELECT COALESCE((
        SELECT array_agg(value)
        FROM unnest($1) WITH ORDINALITY AS t(value, index)
        WHERE index NOT IN (SELECT position FROM replaced_positions)
    ), $1[1:0]);
$_$;


ALTER FUNCTION public.array_nremove(anyarray, anyelement, integer) OWNER TO dispatch;

--
-- Name: definition_search_vector_update(); Type: FUNCTION; Schema: public; Owner: dispatch
--

CREATE FUNCTION public.definition_search_vector_update() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
            BEGIN
                NEW.search_vector = to_tsvector('pg_catalog.english', coalesce(NEW.text, ''));
                RETURN NEW;
            END
            $$;


ALTER FUNCTION public.definition_search_vector_update() OWNER TO dispatch;

--
-- Name: dispatch_user_search_vector_update(); Type: FUNCTION; Schema: public; Owner: dispatch
--

CREATE FUNCTION public.dispatch_user_search_vector_update() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
            BEGIN
                NEW.search_vector = to_tsvector('pg_catalog.english', coalesce(NEW.email, ''));
                RETURN NEW;
            END
            $$;


ALTER FUNCTION public.dispatch_user_search_vector_update() OWNER TO dispatch;

--
-- Name: document_search_vector_update(); Type: FUNCTION; Schema: public; Owner: dispatch
--

CREATE FUNCTION public.document_search_vector_update() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
            BEGIN
                NEW.search_vector = to_tsvector('pg_catalog.english', coalesce(NEW.name, ''));
                RETURN NEW;
            END
            $$;


ALTER FUNCTION public.document_search_vector_update() OWNER TO dispatch;

--
-- Name: incident_search_vector_update(); Type: FUNCTION; Schema: public; Owner: dispatch
--

CREATE FUNCTION public.incident_search_vector_update() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
            BEGIN
                NEW.search_vector = (to_tsvector('pg_catalog.english', coalesce(NEW.name, '')) || to_tsvector('pg_catalog.english', coalesce(NEW.title, ''))) || to_tsvector('pg_catalog.english', coalesce(NEW.description, ''));
                RETURN NEW;
            END
            $$;


ALTER FUNCTION public.incident_search_vector_update() OWNER TO dispatch;

--
-- Name: incident_type_search_vector_update(); Type: FUNCTION; Schema: public; Owner: dispatch
--

CREATE FUNCTION public.incident_type_search_vector_update() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
            BEGIN
                NEW.search_vector = to_tsvector('pg_catalog.english', coalesce(NEW.name, '')) || to_tsvector('pg_catalog.english', coalesce(NEW.description, ''));
                RETURN NEW;
            END
            $$;


ALTER FUNCTION public.incident_type_search_vector_update() OWNER TO dispatch;

--
-- Name: individual_contact_search_vector_update(); Type: FUNCTION; Schema: public; Owner: dispatch
--

CREATE FUNCTION public.individual_contact_search_vector_update() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
            BEGIN
                NEW.search_vector = ((to_tsvector('pg_catalog.english', coalesce(NEW.name, '')) || to_tsvector('pg_catalog.english', coalesce(NEW.title, ''))) || to_tsvector('pg_catalog.english', coalesce(NEW.company, ''))) || to_tsvector('pg_catalog.english', coalesce(NEW.notes, ''));
                RETURN NEW;
            END
            $$;


ALTER FUNCTION public.individual_contact_search_vector_update() OWNER TO dispatch;

--
-- Name: plugin_search_vector_update(); Type: FUNCTION; Schema: public; Owner: dispatch
--

CREATE FUNCTION public.plugin_search_vector_update() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
            BEGIN
                NEW.search_vector = to_tsvector('pg_catalog.english', coalesce(NEW.title, ''));
                RETURN NEW;
            END
            $$;


ALTER FUNCTION public.plugin_search_vector_update() OWNER TO dispatch;

--
-- Name: policy_search_vector_update(); Type: FUNCTION; Schema: public; Owner: dispatch
--

CREATE FUNCTION public.policy_search_vector_update() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
            BEGIN
                NEW.search_vector = to_tsvector('pg_catalog.english', coalesce(NEW.name, '')) || to_tsvector('pg_catalog.english', coalesce(NEW.description, ''));
                RETURN NEW;
            END
            $$;


ALTER FUNCTION public.policy_search_vector_update() OWNER TO dispatch;

--
-- Name: report_search_vector_update(); Type: FUNCTION; Schema: public; Owner: dispatch
--

CREATE FUNCTION public.report_search_vector_update() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
            BEGIN
                NEW.search_vector = to_tsvector('pg_catalog.english', coalesce(NEW.details_raw, ''));
                RETURN NEW;
            END
            $$;


ALTER FUNCTION public.report_search_vector_update() OWNER TO dispatch;

--
-- Name: service_search_vector_update(); Type: FUNCTION; Schema: public; Owner: dispatch
--

CREATE FUNCTION public.service_search_vector_update() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
            BEGIN
                NEW.search_vector = to_tsvector('pg_catalog.english', coalesce(NEW.name, ''));
                RETURN NEW;
            END
            $$;


ALTER FUNCTION public.service_search_vector_update() OWNER TO dispatch;

--
-- Name: tag_search_vector_update(); Type: FUNCTION; Schema: public; Owner: dispatch
--

CREATE FUNCTION public.tag_search_vector_update() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
            BEGIN
                NEW.search_vector = to_tsvector('pg_catalog.english', coalesce(NEW.name, ''));
                RETURN NEW;
            END
            $$;


ALTER FUNCTION public.tag_search_vector_update() OWNER TO dispatch;

--
-- Name: task_search_vector_update(); Type: FUNCTION; Schema: public; Owner: dispatch
--

CREATE FUNCTION public.task_search_vector_update() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
            BEGIN
                NEW.search_vector = to_tsvector('pg_catalog.english', coalesce(NEW.description, ''));
                RETURN NEW;
            END
            $$;


ALTER FUNCTION public.task_search_vector_update() OWNER TO dispatch;

--
-- Name: team_contact_search_vector_update(); Type: FUNCTION; Schema: public; Owner: dispatch
--

CREATE FUNCTION public.team_contact_search_vector_update() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
            BEGIN
                NEW.search_vector = (to_tsvector('pg_catalog.english', coalesce(NEW.name, '')) || to_tsvector('pg_catalog.english', coalesce(NEW.company, ''))) || to_tsvector('pg_catalog.english', coalesce(NEW.notes, ''));
                RETURN NEW;
            END
            $$;


ALTER FUNCTION public.team_contact_search_vector_update() OWNER TO dispatch;

--
-- Name: term_search_vector_update(); Type: FUNCTION; Schema: public; Owner: dispatch
--

CREATE FUNCTION public.term_search_vector_update() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
            BEGIN
                NEW.search_vector = to_tsvector('pg_catalog.english', coalesce(NEW.text, ''));
                RETURN NEW;
            END
            $$;


ALTER FUNCTION public.term_search_vector_update() OWNER TO dispatch;

--
-- Name: tsq_append_current_token(public.tsq_state); Type: FUNCTION; Schema: public; Owner: dispatch
--

CREATE FUNCTION public.tsq_append_current_token(state public.tsq_state) RETURNS public.tsq_state
    LANGUAGE plpgsql IMMUTABLE
    AS $$
BEGIN
    IF state.current_token != '' THEN
        state.tokens := array_append(state.tokens, state.current_token);
        state.current_token := '';
    END IF;
    RETURN state;
END;
$$;


ALTER FUNCTION public.tsq_append_current_token(state public.tsq_state) OWNER TO dispatch;

--
-- Name: tsq_parse(text); Type: FUNCTION; Schema: public; Owner: dispatch
--

CREATE FUNCTION public.tsq_parse(search_query text) RETURNS tsquery
    LANGUAGE sql IMMUTABLE
    AS $$
    SELECT tsq_parse(get_current_ts_config(), search_query);
$$;


ALTER FUNCTION public.tsq_parse(search_query text) OWNER TO dispatch;

--
-- Name: tsq_parse(regconfig, text); Type: FUNCTION; Schema: public; Owner: dispatch
--

CREATE FUNCTION public.tsq_parse(config regconfig, search_query text) RETURNS tsquery
    LANGUAGE sql IMMUTABLE
    AS $$
    SELECT tsq_process_tokens(config, tsq_tokenize(search_query));
$$;


ALTER FUNCTION public.tsq_parse(config regconfig, search_query text) OWNER TO dispatch;

--
-- Name: tsq_parse(text, text); Type: FUNCTION; Schema: public; Owner: dispatch
--

CREATE FUNCTION public.tsq_parse(config text, search_query text) RETURNS tsquery
    LANGUAGE sql IMMUTABLE
    AS $$
    SELECT tsq_parse(config::regconfig, search_query);
$$;


ALTER FUNCTION public.tsq_parse(config text, search_query text) OWNER TO dispatch;

--
-- Name: tsq_process_tokens(text[]); Type: FUNCTION; Schema: public; Owner: dispatch
--

CREATE FUNCTION public.tsq_process_tokens(tokens text[]) RETURNS tsquery
    LANGUAGE sql IMMUTABLE
    AS $$
    SELECT tsq_process_tokens(get_current_ts_config(), tokens);
$$;


ALTER FUNCTION public.tsq_process_tokens(tokens text[]) OWNER TO dispatch;

--
-- Name: tsq_process_tokens(regconfig, text[]); Type: FUNCTION; Schema: public; Owner: dispatch
--

CREATE FUNCTION public.tsq_process_tokens(config regconfig, tokens text[]) RETURNS tsquery
    LANGUAGE plpgsql IMMUTABLE
    AS $$
DECLARE
    result_query text;
    previous_value text;
    value text;
BEGIN
    result_query := '';

    FOREACH value IN ARRAY tokens LOOP
        IF value = '"' THEN
            CONTINUE;
        END IF;

        IF value = 'or' THEN
            value := ' | ';
        END IF;

        IF left(value, 1) = '"' AND right(value, 1) = '"' THEN
            value := phraseto_tsquery(config, value);
        ELSIF value NOT IN ('(', ' | ', ')', '-') THEN
            value := quote_literal(value) || ':*';
        END IF;

        IF previous_value = '-' THEN
            IF value = '(' THEN
                value := '!' || value;
            ELSIF value = ' | ' THEN
                CONTINUE;
            ELSE
                value := '!(' || value || ')';
            END IF;
        END IF;

        SELECT
            CASE
                WHEN result_query = '' THEN value
                WHEN previous_value = ' | ' AND value = ' | ' THEN result_query
                WHEN previous_value = ' | ' THEN result_query || ' | ' || value
                WHEN previous_value IN ('!(', '(') OR value = ')' THEN result_query || value
                WHEN value != ' | ' THEN result_query || ' & ' || value
                ELSE result_query
            END
        INTO result_query;
        previous_value := value;
    END LOOP;

    IF result_query = ' | ' THEN
        RETURN to_tsquery('');
    END IF;

    RETURN to_tsquery(config, result_query);
END;
$$;


ALTER FUNCTION public.tsq_process_tokens(config regconfig, tokens text[]) OWNER TO dispatch;

--
-- Name: tsq_tokenize(text); Type: FUNCTION; Schema: public; Owner: dispatch
--

CREATE FUNCTION public.tsq_tokenize(search_query text) RETURNS text[]
    LANGUAGE plpgsql IMMUTABLE
    AS $$
DECLARE
    state tsq_state;
BEGIN
    SELECT
        search_query::text AS search_query,
        0::int AS parentheses_stack,
        0 AS skip_for,
        ''::text AS current_token,
        0 AS current_index,
        ''::text AS current_char,
        ''::text AS previous_char,
        '{}'::text[] AS tokens
    INTO state;

    state.search_query := lower(trim(
        regexp_replace(search_query, '""+', '""', 'g')
    ));

    FOR state.current_index IN (
        SELECT generate_series(1, length(state.search_query))
    ) LOOP
        state.current_char := substring(
            search_query FROM state.current_index FOR 1
        );

        IF state.skip_for > 0 THEN
            state.skip_for := state.skip_for - 1;
            CONTINUE;
        END IF;

        state := tsq_tokenize_character(state);
        state.previous_char := state.current_char;
    END LOOP;
    state := tsq_append_current_token(state);

    state.tokens := array_nremove(state.tokens, '(', -state.parentheses_stack);

    RETURN state.tokens;
END;
$$;


ALTER FUNCTION public.tsq_tokenize(search_query text) OWNER TO dispatch;

--
-- Name: tsq_tokenize_character(public.tsq_state); Type: FUNCTION; Schema: public; Owner: dispatch
--

CREATE FUNCTION public.tsq_tokenize_character(state public.tsq_state) RETURNS public.tsq_state
    LANGUAGE plpgsql IMMUTABLE
    AS $$
BEGIN
    IF state.current_char = '(' THEN
        state.tokens := array_append(state.tokens, '(');
        state.parentheses_stack := state.parentheses_stack + 1;
        state := tsq_append_current_token(state);
    ELSIF state.current_char = ')' THEN
        IF (state.parentheses_stack > 0 AND state.current_token != '') THEN
            state := tsq_append_current_token(state);
            state.tokens := array_append(state.tokens, ')');
            state.parentheses_stack := state.parentheses_stack - 1;
        END IF;
    ELSIF state.current_char = '"' THEN
        state.skip_for := position('"' IN substring(
            state.search_query FROM state.current_index + 1
        ));

        IF state.skip_for > 1 THEN
            state.tokens = array_append(
                state.tokens,
                substring(
                    state.search_query
                    FROM state.current_index FOR state.skip_for + 1
                )
            );
        ELSIF state.skip_for = 0 THEN
            state.current_token := state.current_token || state.current_char;
        END IF;
    ELSIF (
        state.current_char = '-' AND
        (state.current_index = 1 OR state.previous_char = ' ')
    ) THEN
        state.tokens := array_append(state.tokens, '-');
    ELSIF state.current_char = ' ' THEN
        state := tsq_append_current_token(state);
    ELSE
        state.current_token = state.current_token || state.current_char;
    END IF;
    RETURN state;
END;
$$;


ALTER FUNCTION public.tsq_tokenize_character(state public.tsq_state) OWNER TO dispatch;

--
-- Name: workflow_search_vector_update(); Type: FUNCTION; Schema: public; Owner: dispatch
--

CREATE FUNCTION public.workflow_search_vector_update() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
            BEGIN
                NEW.search_vector = to_tsvector('pg_catalog.english', coalesce(NEW.name, '')) || to_tsvector('pg_catalog.english', coalesce(NEW.description, ''));
                RETURN NEW;
            END
            $$;


ALTER FUNCTION public.workflow_search_vector_update() OWNER TO dispatch;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: alembic_version; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.alembic_version (
    version_num character varying(32) NOT NULL
);


ALTER TABLE public.alembic_version OWNER TO dispatch;

--
-- Name: assoc_incident_tags; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.assoc_incident_tags (
    incident_id integer NOT NULL,
    tag_id integer NOT NULL
);


ALTER TABLE public.assoc_incident_tags OWNER TO dispatch;

--
-- Name: assoc_incident_terms; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.assoc_incident_terms (
    incident_id integer NOT NULL,
    term_id integer NOT NULL
);


ALTER TABLE public.assoc_incident_terms OWNER TO dispatch;

--
-- Name: assoc_individual_contact_incident_priority; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.assoc_individual_contact_incident_priority (
    incident_priority_id integer NOT NULL,
    individual_contact_id integer NOT NULL
);


ALTER TABLE public.assoc_individual_contact_incident_priority OWNER TO dispatch;

--
-- Name: assoc_individual_contact_incident_type; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.assoc_individual_contact_incident_type (
    incident_type_id integer NOT NULL,
    individual_contact_id integer NOT NULL
);


ALTER TABLE public.assoc_individual_contact_incident_type OWNER TO dispatch;

--
-- Name: assoc_individual_contact_terms; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.assoc_individual_contact_terms (
    term_id integer NOT NULL,
    individual_contact_id integer NOT NULL
);


ALTER TABLE public.assoc_individual_contact_terms OWNER TO dispatch;

--
-- Name: conference; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.conference (
    resource_type character varying,
    resource_id character varying,
    weblink character varying,
    id integer NOT NULL,
    conference_id character varying,
    conference_challenge character varying DEFAULT 'N/A'::character varying NOT NULL,
    incident_id integer,
    updated_at timestamp without time zone,
    created_at timestamp without time zone
);


ALTER TABLE public.conference OWNER TO dispatch;

--
-- Name: conference_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.conference_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.conference_id_seq OWNER TO dispatch;

--
-- Name: conference_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.conference_id_seq OWNED BY public.conference.id;


--
-- Name: conversation; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.conversation (
    resource_type character varying,
    resource_id character varying,
    weblink character varying,
    id integer NOT NULL,
    channel_id character varying,
    incident_id integer,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


ALTER TABLE public.conversation OWNER TO dispatch;

--
-- Name: conversation_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.conversation_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.conversation_id_seq OWNER TO dispatch;

--
-- Name: conversation_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.conversation_id_seq OWNED BY public.conversation.id;


--
-- Name: definition; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.definition (
    id integer NOT NULL,
    text character varying,
    source character varying,
    search_vector tsvector
);


ALTER TABLE public.definition OWNER TO dispatch;

--
-- Name: definition_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.definition_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.definition_id_seq OWNER TO dispatch;

--
-- Name: definition_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.definition_id_seq OWNED BY public.definition.id;


--
-- Name: definition_teams; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.definition_teams (
    definition_id integer NOT NULL,
    team_contact_id integer NOT NULL
);


ALTER TABLE public.definition_teams OWNER TO dispatch;

--
-- Name: definition_terms; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.definition_terms (
    definition_id integer NOT NULL,
    term_id integer NOT NULL
);


ALTER TABLE public.definition_terms OWNER TO dispatch;

--
-- Name: dispatch_user; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.dispatch_user (
    id integer NOT NULL,
    email character varying,
    password bytea NOT NULL,
    role character varying NOT NULL,
    search_vector tsvector,
    updated_at timestamp without time zone,
    created_at timestamp without time zone
);


ALTER TABLE public.dispatch_user OWNER TO dispatch;

--
-- Name: dispatch_user_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.dispatch_user_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.dispatch_user_id_seq OWNER TO dispatch;

--
-- Name: dispatch_user_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.dispatch_user_id_seq OWNED BY public.dispatch_user.id;


--
-- Name: document; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.document (
    resource_type character varying,
    resource_id character varying,
    weblink character varying,
    id integer NOT NULL,
    name character varying,
    description character varying,
    report_id integer,
    search_vector tsvector,
    incident_id integer,
    created_at timestamp without time zone,
    updated_at timestamp without time zone,
    evergreen boolean,
    evergreen_last_reminder_at timestamp without time zone,
    evergreen_owner character varying,
    evergreen_reminder_interval integer
);


ALTER TABLE public.document OWNER TO dispatch;

--
-- Name: document_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.document_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.document_id_seq OWNER TO dispatch;

--
-- Name: document_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.document_id_seq OWNED BY public.document.id;


--
-- Name: document_incident; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.document_incident (
    incident_id integer NOT NULL,
    document_id integer NOT NULL
);


ALTER TABLE public.document_incident OWNER TO dispatch;

--
-- Name: document_incident_priority; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.document_incident_priority (
    incident_priority_id integer NOT NULL,
    document_id integer NOT NULL
);


ALTER TABLE public.document_incident_priority OWNER TO dispatch;

--
-- Name: document_incident_type; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.document_incident_type (
    incident_type_id integer NOT NULL,
    document_id integer NOT NULL
);


ALTER TABLE public.document_incident_type OWNER TO dispatch;

--
-- Name: document_terms; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.document_terms (
    term_id integer NOT NULL,
    document_id integer NOT NULL
);


ALTER TABLE public.document_terms OWNER TO dispatch;

--
-- Name: event; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.event (
    id integer NOT NULL,
    uuid uuid NOT NULL,
    started_at timestamp without time zone NOT NULL,
    ended_at timestamp without time zone NOT NULL,
    source character varying NOT NULL,
    description character varying NOT NULL,
    details json,
    individual_id integer,
    incident_id integer,
    search_vector tsvector,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


ALTER TABLE public.event OWNER TO dispatch;

--
-- Name: event_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.event_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.event_id_seq OWNER TO dispatch;

--
-- Name: event_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.event_id_seq OWNED BY public.event.id;


--
-- Name: feedback; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.feedback (
    id integer NOT NULL,
    rating character varying,
    feedback character varying,
    incident_id integer,
    participant_id integer,
    updated_at timestamp without time zone,
    created_at timestamp without time zone
);


ALTER TABLE public.feedback OWNER TO dispatch;

--
-- Name: feedback_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.feedback_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.feedback_id_seq OWNER TO dispatch;

--
-- Name: feedback_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.feedback_id_seq OWNED BY public.feedback.id;


--
-- Name: group; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public."group" (
    resource_type character varying,
    resource_id character varying,
    weblink character varying,
    id integer NOT NULL,
    name character varying,
    email character varying,
    incident_id integer,
    updated_at timestamp without time zone,
    created_at timestamp without time zone
);


ALTER TABLE public."group" OWNER TO dispatch;

--
-- Name: group_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.group_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.group_id_seq OWNER TO dispatch;

--
-- Name: group_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.group_id_seq OWNED BY public."group".id;


--
-- Name: incident; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.incident (
    id integer NOT NULL,
    name character varying,
    title character varying NOT NULL,
    description character varying NOT NULL,
    status character varying,
    cost double precision,
    visibility character varying,
    reported_at timestamp without time zone,
    stable_at timestamp without time zone,
    closed_at timestamp without time zone,
    search_vector tsvector,
    incident_priority_id integer,
    incident_type_id integer,
    duplicate_id integer,
    updated_at timestamp without time zone,
    created_at timestamp without time zone
);


ALTER TABLE public.incident OWNER TO dispatch;

--
-- Name: incident_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.incident_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.incident_id_seq OWNER TO dispatch;

--
-- Name: incident_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.incident_id_seq OWNED BY public.incident.id;


--
-- Name: incident_priority; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.incident_priority (
    id integer NOT NULL,
    name character varying,
    description character varying,
    page_commander boolean,
    tactical_report_reminder integer DEFAULT 24,
    executive_report_reminder integer DEFAULT 24,
    "default" boolean,
    view_order integer,
    search_vector tsvector
);


ALTER TABLE public.incident_priority OWNER TO dispatch;

--
-- Name: incident_priority_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.incident_priority_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.incident_priority_id_seq OWNER TO dispatch;

--
-- Name: incident_priority_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.incident_priority_id_seq OWNED BY public.incident_priority.id;


--
-- Name: incident_type; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.incident_type (
    id integer NOT NULL,
    name character varying,
    slug character varying,
    description character varying,
    exclude_from_metrics boolean,
    "default" boolean,
    visibility character varying,
    plugin_metadata json,
    template_document_id integer,
    commander_service_id integer,
    search_vector tsvector,
    liaison_service_id integer
);


ALTER TABLE public.incident_type OWNER TO dispatch;

--
-- Name: incident_type_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.incident_type_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.incident_type_id_seq OWNER TO dispatch;

--
-- Name: incident_type_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.incident_type_id_seq OWNED BY public.incident_type.id;


--
-- Name: individual_contact; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.individual_contact (
    is_active boolean,
    is_external boolean,
    contact_type character varying,
    email character varying,
    company character varying,
    notes character varying,
    owner character varying,
    id integer NOT NULL,
    name character varying,
    mobile_phone character varying,
    office_phone character varying,
    title character varying,
    weblink character varying,
    team_contact_id integer,
    search_vector tsvector,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


ALTER TABLE public.individual_contact OWNER TO dispatch;

--
-- Name: individual_contact_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.individual_contact_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.individual_contact_id_seq OWNER TO dispatch;

--
-- Name: individual_contact_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.individual_contact_id_seq OWNED BY public.individual_contact.id;


--
-- Name: participant; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.participant (
    id integer NOT NULL,
    is_active boolean,
    active_at timestamp without time zone,
    inactive_at timestamp without time zone,
    team character varying,
    department character varying,
    added_by_id integer,
    added_reason character varying,
    location character varying,
    after_hours_notification boolean,
    incident_id integer,
    individual_contact_id integer
);


ALTER TABLE public.participant OWNER TO dispatch;

--
-- Name: participant_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.participant_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.participant_id_seq OWNER TO dispatch;

--
-- Name: participant_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.participant_id_seq OWNED BY public.participant.id;


--
-- Name: participant_role; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.participant_role (
    id integer NOT NULL,
    assumed_at timestamp without time zone,
    renounced_at timestamp without time zone,
    role character varying,
    participant_id integer
);


ALTER TABLE public.participant_role OWNER TO dispatch;

--
-- Name: participant_role_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.participant_role_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.participant_role_id_seq OWNER TO dispatch;

--
-- Name: participant_role_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.participant_role_id_seq OWNED BY public.participant_role.id;


--
-- Name: plugin; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.plugin (
    id integer NOT NULL,
    title character varying,
    slug character varying,
    description character varying,
    version character varying,
    author character varying,
    author_url character varying,
    type character varying,
    enabled boolean,
    required boolean,
    multiple boolean,
    configuration json,
    search_vector tsvector
);


ALTER TABLE public.plugin OWNER TO dispatch;

--
-- Name: plugin_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.plugin_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.plugin_id_seq OWNER TO dispatch;

--
-- Name: plugin_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.plugin_id_seq OWNED BY public.plugin.id;


--
-- Name: policy; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.policy (
    id integer NOT NULL,
    name character varying,
    description character varying,
    expression character varying,
    search_vector tsvector
);


ALTER TABLE public.policy OWNER TO dispatch;

--
-- Name: policy_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.policy_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.policy_id_seq OWNER TO dispatch;

--
-- Name: policy_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.policy_id_seq OWNED BY public.policy.id;


--
-- Name: recommendation; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.recommendation (
    id integer NOT NULL,
    text character varying
);


ALTER TABLE public.recommendation OWNER TO dispatch;

--
-- Name: recommendation_accuracy; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.recommendation_accuracy (
    id integer NOT NULL,
    recommendation_id integer,
    correct boolean,
    resource_id integer,
    resource_type character varying
);


ALTER TABLE public.recommendation_accuracy OWNER TO dispatch;

--
-- Name: recommendation_accuracy_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.recommendation_accuracy_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.recommendation_accuracy_id_seq OWNER TO dispatch;

--
-- Name: recommendation_accuracy_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.recommendation_accuracy_id_seq OWNED BY public.recommendation_accuracy.id;


--
-- Name: recommendation_documents; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.recommendation_documents (
    document_id integer NOT NULL,
    recommendation_id integer NOT NULL
);


ALTER TABLE public.recommendation_documents OWNER TO dispatch;

--
-- Name: recommendation_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.recommendation_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.recommendation_id_seq OWNER TO dispatch;

--
-- Name: recommendation_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.recommendation_id_seq OWNED BY public.recommendation.id;


--
-- Name: recommendation_incident_priorities; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.recommendation_incident_priorities (
    incident_priority_id integer NOT NULL,
    recommendation_id integer NOT NULL
);


ALTER TABLE public.recommendation_incident_priorities OWNER TO dispatch;

--
-- Name: recommendation_incident_types; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.recommendation_incident_types (
    incident_type_id integer NOT NULL,
    recommendation_id integer NOT NULL
);


ALTER TABLE public.recommendation_incident_types OWNER TO dispatch;

--
-- Name: recommendation_individual_contacts; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.recommendation_individual_contacts (
    individual_contact_id integer NOT NULL,
    recommendation_id integer NOT NULL
);


ALTER TABLE public.recommendation_individual_contacts OWNER TO dispatch;

--
-- Name: recommendation_services; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.recommendation_services (
    service_id integer NOT NULL,
    recommendation_id integer NOT NULL
);


ALTER TABLE public.recommendation_services OWNER TO dispatch;

--
-- Name: recommendation_team_contacts; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.recommendation_team_contacts (
    team_contact_id integer NOT NULL,
    recommendation_id integer NOT NULL
);


ALTER TABLE public.recommendation_team_contacts OWNER TO dispatch;

--
-- Name: recommendation_terms; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.recommendation_terms (
    term_id integer NOT NULL,
    recommendation_id integer NOT NULL
);


ALTER TABLE public.recommendation_terms OWNER TO dispatch;

--
-- Name: report; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.report (
    id integer NOT NULL,
    created_at timestamp without time zone,
    details json,
    details_raw character varying,
    type character varying DEFAULT 'Tactical Report'::character varying NOT NULL,
    incident_id integer,
    participant_id integer,
    search_vector tsvector
);


ALTER TABLE public.report OWNER TO dispatch;

--
-- Name: report_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.report_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.report_id_seq OWNER TO dispatch;

--
-- Name: report_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.report_id_seq OWNED BY public.report.id;


--
-- Name: service; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.service (
    id integer NOT NULL,
    is_active boolean,
    name character varying,
    type character varying,
    description character varying,
    external_id character varying,
    search_vector tsvector,
    updated_at timestamp without time zone,
    created_at timestamp without time zone
);


ALTER TABLE public.service OWNER TO dispatch;

--
-- Name: service_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.service_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.service_id_seq OWNER TO dispatch;

--
-- Name: service_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.service_id_seq OWNED BY public.service.id;


--
-- Name: service_incident; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.service_incident (
    incident_id integer NOT NULL,
    service_id integer NOT NULL
);


ALTER TABLE public.service_incident OWNER TO dispatch;

--
-- Name: service_incident_priority; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.service_incident_priority (
    incident_priority_id integer NOT NULL,
    service_id integer NOT NULL
);


ALTER TABLE public.service_incident_priority OWNER TO dispatch;

--
-- Name: service_incident_type; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.service_incident_type (
    incident_type_id integer NOT NULL,
    service_id integer NOT NULL
);


ALTER TABLE public.service_incident_type OWNER TO dispatch;

--
-- Name: service_terms; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.service_terms (
    term_id integer NOT NULL,
    service_id integer NOT NULL
);


ALTER TABLE public.service_terms OWNER TO dispatch;

--
-- Name: storage; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.storage (
    resource_type character varying,
    resource_id character varying,
    weblink character varying,
    id integer NOT NULL,
    incident_id integer,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


ALTER TABLE public.storage OWNER TO dispatch;

--
-- Name: storage_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.storage_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.storage_id_seq OWNER TO dispatch;

--
-- Name: storage_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.storage_id_seq OWNED BY public.storage.id;


--
-- Name: tag; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.tag (
    id integer NOT NULL,
    name character varying,
    description character varying,
    uri character varying,
    source character varying,
    discoverable boolean,
    search_vector tsvector,
    updated_at timestamp without time zone,
    created_at timestamp without time zone,
    tag_type_id integer
);


ALTER TABLE public.tag OWNER TO dispatch;

--
-- Name: tag_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.tag_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.tag_id_seq OWNER TO dispatch;

--
-- Name: tag_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.tag_id_seq OWNED BY public.tag.id;


--
-- Name: tag_type; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.tag_type (
    id integer NOT NULL,
    name character varying,
    description character varying,
    search_vector tsvector,
    updated_at timestamp without time zone,
    created_at timestamp without time zone
);


ALTER TABLE public.tag_type OWNER TO dispatch;

--
-- Name: tag_type_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.tag_type_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.tag_type_id_seq OWNER TO dispatch;

--
-- Name: tag_type_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.tag_type_id_seq OWNED BY public.tag_type.id;


--
-- Name: task; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.task (
    resource_type character varying,
    resource_id character varying,
    weblink character varying,
    id integer NOT NULL,
    resolved_at timestamp without time zone,
    resolve_by timestamp without time zone,
    last_reminder_at timestamp without time zone,
    creator_id integer,
    description character varying,
    source character varying,
    priority character varying,
    status character varying,
    reminders boolean,
    incident_id integer,
    search_vector tsvector,
    created_at timestamp without time zone,
    updated_at timestamp without time zone,
    owner_id integer
);


ALTER TABLE public.task OWNER TO dispatch;

--
-- Name: task_assignees; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.task_assignees (
    participant_id integer NOT NULL,
    task_id integer NOT NULL
);


ALTER TABLE public.task_assignees OWNER TO dispatch;

--
-- Name: task_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.task_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.task_id_seq OWNER TO dispatch;

--
-- Name: task_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.task_id_seq OWNED BY public.task.id;


--
-- Name: task_tickets; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.task_tickets (
    ticket_id integer NOT NULL,
    task_id integer NOT NULL
);


ALTER TABLE public.task_tickets OWNER TO dispatch;

--
-- Name: team_contact; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.team_contact (
    is_active boolean,
    is_external boolean,
    contact_type character varying,
    email character varying,
    company character varying,
    owner character varying,
    id integer NOT NULL,
    name character varying,
    notes character varying,
    search_vector tsvector,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


ALTER TABLE public.team_contact OWNER TO dispatch;

--
-- Name: team_contact_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.team_contact_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.team_contact_id_seq OWNER TO dispatch;

--
-- Name: team_contact_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.team_contact_id_seq OWNED BY public.team_contact.id;


--
-- Name: team_contact_incident; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.team_contact_incident (
    incident_id integer NOT NULL,
    team_contact_id integer NOT NULL
);


ALTER TABLE public.team_contact_incident OWNER TO dispatch;

--
-- Name: team_contact_incident_priority; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.team_contact_incident_priority (
    incident_priority_id integer NOT NULL,
    team_contact_id integer NOT NULL
);


ALTER TABLE public.team_contact_incident_priority OWNER TO dispatch;

--
-- Name: team_contact_incident_type; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.team_contact_incident_type (
    incident_type_id integer NOT NULL,
    team_contact_id integer NOT NULL
);


ALTER TABLE public.team_contact_incident_type OWNER TO dispatch;

--
-- Name: team_contact_terms; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.team_contact_terms (
    term_id integer NOT NULL,
    team_contact_id integer NOT NULL
);


ALTER TABLE public.team_contact_terms OWNER TO dispatch;

--
-- Name: term; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.term (
    id integer NOT NULL,
    text character varying,
    discoverable boolean,
    search_vector tsvector
);


ALTER TABLE public.term OWNER TO dispatch;

--
-- Name: term_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.term_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.term_id_seq OWNER TO dispatch;

--
-- Name: term_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.term_id_seq OWNED BY public.term.id;


--
-- Name: ticket; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.ticket (
    resource_type character varying,
    resource_id character varying,
    weblink character varying,
    id integer NOT NULL,
    incident_id integer,
    updated_at timestamp without time zone,
    created_at timestamp without time zone
);


ALTER TABLE public.ticket OWNER TO dispatch;

--
-- Name: ticket_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.ticket_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.ticket_id_seq OWNER TO dispatch;

--
-- Name: ticket_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.ticket_id_seq OWNED BY public.ticket.id;


--
-- Name: workflow; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.workflow (
    id integer NOT NULL,
    name character varying,
    description character varying,
    parameters json,
    resource_id character varying,
    search_vector tsvector,
    created_at timestamp without time zone,
    updated_at timestamp without time zone,
    plugin_id integer,
    enabled boolean
);


ALTER TABLE public.workflow OWNER TO dispatch;

--
-- Name: workflow_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.workflow_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.workflow_id_seq OWNER TO dispatch;

--
-- Name: workflow_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.workflow_id_seq OWNED BY public.workflow.id;


--
-- Name: workflow_incident_priority; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.workflow_incident_priority (
    incident_priority_id integer NOT NULL,
    workflow_id integer NOT NULL
);


ALTER TABLE public.workflow_incident_priority OWNER TO dispatch;

--
-- Name: workflow_incident_type; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.workflow_incident_type (
    incident_type_id integer NOT NULL,
    workflow_id integer NOT NULL
);


ALTER TABLE public.workflow_incident_type OWNER TO dispatch;

--
-- Name: workflow_instance; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.workflow_instance (
    resource_type character varying,
    resource_id character varying,
    weblink character varying,
    id integer NOT NULL,
    workflow_id integer,
    creator_id integer,
    status character varying,
    incident_id integer,
    created_at timestamp without time zone,
    updated_at timestamp without time zone,
    parameters json,
    run_reason character varying
);


ALTER TABLE public.workflow_instance OWNER TO dispatch;

--
-- Name: workflow_instance_artifact; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.workflow_instance_artifact (
    document_id integer NOT NULL,
    workflow_instance_id integer NOT NULL
);


ALTER TABLE public.workflow_instance_artifact OWNER TO dispatch;

--
-- Name: workflow_instance_id_seq; Type: SEQUENCE; Schema: public; Owner: dispatch
--

CREATE SEQUENCE public.workflow_instance_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.workflow_instance_id_seq OWNER TO dispatch;

--
-- Name: workflow_instance_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dispatch
--

ALTER SEQUENCE public.workflow_instance_id_seq OWNED BY public.workflow_instance.id;


--
-- Name: workflow_term; Type: TABLE; Schema: public; Owner: dispatch
--

CREATE TABLE public.workflow_term (
    term_id integer NOT NULL,
    workflow_id integer NOT NULL
);


ALTER TABLE public.workflow_term OWNER TO dispatch;

--
-- Name: conference id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.conference ALTER COLUMN id SET DEFAULT nextval('public.conference_id_seq'::regclass);


--
-- Name: conversation id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.conversation ALTER COLUMN id SET DEFAULT nextval('public.conversation_id_seq'::regclass);


--
-- Name: definition id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.definition ALTER COLUMN id SET DEFAULT nextval('public.definition_id_seq'::regclass);


--
-- Name: dispatch_user id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.dispatch_user ALTER COLUMN id SET DEFAULT nextval('public.dispatch_user_id_seq'::regclass);


--
-- Name: document id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.document ALTER COLUMN id SET DEFAULT nextval('public.document_id_seq'::regclass);


--
-- Name: event id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.event ALTER COLUMN id SET DEFAULT nextval('public.event_id_seq'::regclass);


--
-- Name: feedback id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.feedback ALTER COLUMN id SET DEFAULT nextval('public.feedback_id_seq'::regclass);


--
-- Name: group id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public."group" ALTER COLUMN id SET DEFAULT nextval('public.group_id_seq'::regclass);


--
-- Name: incident id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.incident ALTER COLUMN id SET DEFAULT nextval('public.incident_id_seq'::regclass);


--
-- Name: incident_priority id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.incident_priority ALTER COLUMN id SET DEFAULT nextval('public.incident_priority_id_seq'::regclass);


--
-- Name: incident_type id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.incident_type ALTER COLUMN id SET DEFAULT nextval('public.incident_type_id_seq'::regclass);


--
-- Name: individual_contact id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.individual_contact ALTER COLUMN id SET DEFAULT nextval('public.individual_contact_id_seq'::regclass);


--
-- Name: participant id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.participant ALTER COLUMN id SET DEFAULT nextval('public.participant_id_seq'::regclass);


--
-- Name: participant_role id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.participant_role ALTER COLUMN id SET DEFAULT nextval('public.participant_role_id_seq'::regclass);


--
-- Name: plugin id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.plugin ALTER COLUMN id SET DEFAULT nextval('public.plugin_id_seq'::regclass);


--
-- Name: policy id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.policy ALTER COLUMN id SET DEFAULT nextval('public.policy_id_seq'::regclass);


--
-- Name: recommendation id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation ALTER COLUMN id SET DEFAULT nextval('public.recommendation_id_seq'::regclass);


--
-- Name: recommendation_accuracy id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation_accuracy ALTER COLUMN id SET DEFAULT nextval('public.recommendation_accuracy_id_seq'::regclass);


--
-- Name: report id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.report ALTER COLUMN id SET DEFAULT nextval('public.report_id_seq'::regclass);


--
-- Name: service id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.service ALTER COLUMN id SET DEFAULT nextval('public.service_id_seq'::regclass);


--
-- Name: storage id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.storage ALTER COLUMN id SET DEFAULT nextval('public.storage_id_seq'::regclass);


--
-- Name: tag id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.tag ALTER COLUMN id SET DEFAULT nextval('public.tag_id_seq'::regclass);


--
-- Name: tag_type id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.tag_type ALTER COLUMN id SET DEFAULT nextval('public.tag_type_id_seq'::regclass);


--
-- Name: task id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.task ALTER COLUMN id SET DEFAULT nextval('public.task_id_seq'::regclass);


--
-- Name: team_contact id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.team_contact ALTER COLUMN id SET DEFAULT nextval('public.team_contact_id_seq'::regclass);


--
-- Name: term id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.term ALTER COLUMN id SET DEFAULT nextval('public.term_id_seq'::regclass);


--
-- Name: ticket id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.ticket ALTER COLUMN id SET DEFAULT nextval('public.ticket_id_seq'::regclass);


--
-- Name: workflow id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.workflow ALTER COLUMN id SET DEFAULT nextval('public.workflow_id_seq'::regclass);


--
-- Name: workflow_instance id; Type: DEFAULT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.workflow_instance ALTER COLUMN id SET DEFAULT nextval('public.workflow_instance_id_seq'::regclass);


--
-- Data for Name: alembic_version; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.alembic_version (version_num) FROM stdin;
1c3f808aa00c
\.


--
-- Data for Name: assoc_incident_tags; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.assoc_incident_tags (incident_id, tag_id) FROM stdin;
\.


--
-- Data for Name: assoc_incident_terms; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.assoc_incident_terms (incident_id, term_id) FROM stdin;
\.


--
-- Data for Name: assoc_individual_contact_incident_priority; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.assoc_individual_contact_incident_priority (incident_priority_id, individual_contact_id) FROM stdin;
\.


--
-- Data for Name: assoc_individual_contact_incident_type; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.assoc_individual_contact_incident_type (incident_type_id, individual_contact_id) FROM stdin;
\.


--
-- Data for Name: assoc_individual_contact_terms; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.assoc_individual_contact_terms (term_id, individual_contact_id) FROM stdin;
\.


--
-- Data for Name: conference; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.conference (resource_type, resource_id, weblink, id, conference_id, conference_challenge, incident_id, updated_at, created_at) FROM stdin;
google-calendar-conference	9ak1c5r6jqnsjg838bitpnmcpc	https://meet.google.com/kdt-mqyq-vio	1	9ak1c5r6jqnsjg838bitpnmcpc		1	2020-07-24 18:03:14.384785	2020-07-24 18:03:14.364559
\.


--
-- Data for Name: conversation; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.conversation (resource_type, resource_id, weblink, id, channel_id, incident_id, created_at, updated_at) FROM stdin;
slack-conversation	dispatch-1	https://slack.com/app_redirect?channel=G017915SK2T	1	G017915SK2T	1	2020-07-24 18:03:15.668378	2020-07-24 18:03:15.686849
\.


--
-- Data for Name: definition; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.definition (id, text, source, search_vector) FROM stdin;
\.


--
-- Data for Name: definition_teams; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.definition_teams (definition_id, team_contact_id) FROM stdin;
\.


--
-- Data for Name: definition_terms; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.definition_terms (definition_id, term_id) FROM stdin;
\.


--
-- Data for Name: dispatch_user; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.dispatch_user (id, email, password, role, search_vector, updated_at, created_at) FROM stdin;
1	dispatch@example.com	\\x24326224313224497544303865553955444153726d47417763663834654771354b7a58396170577774447a5754635a586454473753396d333564774b	User	'dispatch@example.com':1	2020-07-24 17:20:08.75133	2020-07-24 17:20:08.751345
\.


--
-- Data for Name: document; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.document (resource_type, resource_id, weblink, id, name, description, report_id, search_vector, incident_id, created_at, updated_at, evergreen, evergreen_last_reminder_at, evergreen_owner, evergreen_reminder_interval) FROM stdin;
dispatch-generic-incident-document	1uSKfArHafY2aN2kHi5Muv6LM8d5t83uVEMRkW0swfjA	https://docs.google.com/document/d/1uSKfArHafY2aN2kHi5Muv6LM8d5t83uVEMRkW0swfjA	1	Incident Document Template	This is a document for all incident facts and context. All incident participants are expected to contribute to this document. It is shared with all incident participants.	\N	'document':2 'incid':1 'templat':3	\N	2020-07-24 17:26:35.824567	2020-07-24 17:26:35.824582	\N	\N	\N	\N
dispatch-executive-report-document-template	1cdwlyhNEdVP9mMbaDVa1Hr-_rj9y4umxIucBntmwP-g	https://docs.google.com/document/d/1cdwlyhNEdVP9mMbaDVa1Hr-_rj9y4umxIucBntmwP-g/	2	Executive Report Document Template	This is a document template for executive reports.	\N	'document':3 'execut':1 'report':2 'templat':4	\N	2020-07-24 17:33:15.201277	2020-07-24 17:33:15.201306	\N	\N	\N	\N
dispatch-incident-sheet-template	1a6j9SmzsFnk8RwxNgzieX8nhCvRpH2GybtvgI7PvGLg	https://docs.google.com/spreadsheets/d/1a6j9SmzsFnk8RwxNgzieX8nhCvRpH2GybtvgI7PvGLg/	3	Incident Tracking Sheet Template	This is a sheet for tracking impacted assets. All incident participants are expected to contribute to this sheet. It is shared with all incident participants.	\N	'incid':1 'sheet':3 'templat':4 'track':2	\N	2020-07-24 17:34:06.474813	2020-07-24 17:34:06.474819	\N	\N	\N	\N
dispatch-incident-review-document-template	1IKz1FHOfI7iSWx0t5vwvgi5k1AQACo3GIYSpvnvQaco	https://docs.google.com/document/d/1IKz1FHOfI7iSWx0t5vwvgi5k1AQACo3GIYSpvnvQaco/	4	Post Incident Review Template	Post incident review template review document.	\N	'incid':2 'post':1 'review':3 'templat':4	\N	2020-07-24 17:34:51.201291	2020-07-24 17:34:51.201305	\N	\N	\N	\N
dispatch-incident-sheet	1PZp5SWRIZGgwggUANZFWEPJUDJvH4HHSBmkknUhSx48	https://docs.google.com/spreadsheets/d/1PZp5SWRIZGgwggUANZFWEPJUDJvH4HHSBmkknUhSx48/edit?usp=drivesdk	5	dispatch-1 - Incident Tracking Sheet	\N	\N	'-1':2 'dispatch':1 'incid':3 'sheet':5 'track':4	1	2020-07-24 18:03:12.561807	2020-07-24 18:03:12.58184	\N	\N	\N	\N
dispatch-incident-document	1D7mD9mUa0mMN3dRbXpO6AaolIQsEQ-jehvVJfaU5vRA	https://docs.google.com/document/d/1D7mD9mUa0mMN3dRbXpO6AaolIQsEQ-jehvVJfaU5vRA/edit?usp=drivesdk	6	dispatch-1 - Incident Document	\N	\N	'-1':2 'dispatch':1 'document':4 'incid':3	1	2020-07-24 18:03:12.593469	2020-07-24 18:03:12.606821	\N	\N	\N	\N
\.


--
-- Data for Name: document_incident; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.document_incident (incident_id, document_id) FROM stdin;
\.


--
-- Data for Name: document_incident_priority; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.document_incident_priority (incident_priority_id, document_id) FROM stdin;
\.


--
-- Data for Name: document_incident_type; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.document_incident_type (incident_type_id, document_id) FROM stdin;
\.


--
-- Data for Name: document_terms; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.document_terms (term_id, document_id) FROM stdin;
\.


--
-- Data for Name: event; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.event (id, uuid, started_at, ended_at, source, description, details, individual_id, incident_id, search_vector, created_at, updated_at) FROM stdin;
1	651b295a-991d-4a67-991b-c6de0e4b7611	2020-07-24 18:02:38.251956	2020-07-24 18:02:38.251956	Dispatch Core App	Incident created	null	\N	1	\N	2020-07-24 18:02:38.254379	2020-07-24 18:02:38.338948
4	128f3466-9521-4c89-a3c1-db638328eb57	2020-07-24 18:02:41.168375	2020-07-24 18:02:41.168375	Dispatch Plugin - Participant Resolver	Incident participants resolved	null	\N	1	\N	2020-07-24 18:02:41.168882	2020-07-24 18:02:41.203844
5	c52ea18f-d198-43ab-8533-15dc2d1dddcf	2020-07-24 18:02:41.220688	2020-07-24 18:02:41.220688	Dispatch Core App	Incident participants added to incident	null	\N	1	\N	2020-07-24 18:02:41.221122	2020-07-24 18:02:41.247507
6	8cd9ecd5-a564-41fa-a8eb-cd80706307f1	2020-07-24 18:02:41.294686	2020-07-24 18:02:41.294686	Dispatch Plugin - Ticket Management	External ticket created	null	\N	1	\N	2020-07-24 18:02:41.2951	2020-07-24 18:02:41.319984
7	db9874ef-d192-42db-a549-4534cacc17c2	2020-07-24 18:02:41.350764	2020-07-24 18:02:41.350764	Dispatch Core App	External ticket added to incident	null	\N	1	\N	2020-07-24 18:02:41.3629	2020-07-24 18:02:41.388231
8	7a57ab3f-a4aa-43c2-8c87-7692e16fd9fc	2020-07-24 18:02:52.450317	2020-07-24 18:02:52.450317	Google Group Plugin - Participant Group Management	Tactical and notification groups created	null	\N	1	\N	2020-07-24 18:02:52.451042	2020-07-24 18:02:52.481715
9	86f47430-cb16-42df-8e3b-370e28b1c821	2020-07-24 18:02:52.569473	2020-07-24 18:02:52.569473	Dispatch Core App	Tactical and notification groups added to incident	null	\N	1	\N	2020-07-24 18:02:52.58889	2020-07-24 18:02:52.631047
10	b07f2642-9ff0-4485-b1ae-afad0929630e	2020-07-24 18:02:57.334859	2020-07-24 18:02:57.334859	Dispatch Core App	Storage added to incident	null	\N	1	\N	2020-07-24 18:02:57.343367	2020-07-24 18:02:57.381868
11	bd92b20d-687b-46ea-b60b-bef59beb02fe	2020-07-24 18:03:12.512639	2020-07-24 18:03:12.512639	Google Drive Plugin - Storage Management	Incident investigation document and sheet created	null	\N	1	\N	2020-07-24 18:03:12.513311	2020-07-24 18:03:12.542486
12	2e07c681-7717-4e30-82ca-86256e58d757	2020-07-24 18:03:12.603263	2020-07-24 18:03:12.603263	Dispatch Core App	Documents added to incident	null	\N	1	\N	2020-07-24 18:03:12.612236	2020-07-24 18:03:12.636687
13	4f573dec-e656-4f71-9a06-ac051fff4534	2020-07-24 18:03:14.329539	2020-07-24 18:03:14.329539	Google Calendar Plugin - Conference Management	Incident conference created	null	\N	1	\N	2020-07-24 18:03:14.330012	2020-07-24 18:03:14.355007
14	410d4b98-212a-4e6c-b96a-6f19e52ab154	2020-07-24 18:03:14.37857	2020-07-24 18:03:14.37857	Dispatch Core App	Conference added to incident	null	\N	1	\N	2020-07-24 18:03:14.382644	2020-07-24 18:03:14.417888
15	42c79c7f-6ccc-43e1-b126-b91f08040512	2020-07-24 18:03:15.599083	2020-07-24 18:03:15.599083	Slack Plugin - Conversation Management	Incident conversation created	null	\N	1	\N	2020-07-24 18:03:15.600071	2020-07-24 18:03:15.65274
16	e4056bb2-5adc-48a5-a35a-eb597ed7f7a8	2020-07-24 18:03:15.683537	2020-07-24 18:03:15.683537	Dispatch Core App	Conversation added to incident	null	\N	1	\N	2020-07-24 18:03:15.695182	2020-07-24 18:03:15.731365
17	5e769ad5-d162-42a9-918f-437317ed6a18	2020-07-24 18:03:20.294338	2020-07-24 18:03:20.294338	Dispatch Core App	Incident notifications sent	null	\N	1	\N	2020-07-24 18:03:20.295182	2020-07-24 18:03:20.322527
18	6cc06d03-9749-4143-971d-ce11eb1827db	2020-07-24 18:03:20.5327	2020-07-24 18:03:20.5327	Dispatch Core App	Participants announced and welcome messages sent	null	\N	1	\N	2020-07-24 18:03:20.534064	2020-07-24 18:03:20.565531
2	1c916947-a9cc-4e63-b423-d63e09401653	2020-07-24 18:02:38.78052	2020-07-24 18:02:38.78052	Dispatch Core App	dispatch@example.com added to incident with Reporter role	null	\N	1	\N	2020-07-24 18:02:38.781971	2020-07-24 18:02:39.193046
3	ea043ea7-9f6e-4adb-8305-f2cbd2b7a3a6	2020-07-24 18:02:40.716362	2020-07-24 18:02:40.716362	Dispatch Core App	dispatch@example.com added to incident with Incident Commander role	null	\N	1	\N	2020-07-24 18:02:40.716998	2020-07-24 18:02:40.745702
19	89612d6e-e8c7-43dc-a7c9-7d35170c9ff9	2020-07-24 18:09:16.74069	2020-07-24 18:09:16.74069	Dispatch Core App	dispatch@example.com added to incident with Participant role	null	\N	1	\N	2020-07-24 18:09:16.741116	2020-07-24 18:09:16.766514
21	54cbc6db-e433-4406-8b61-574173995a2a	2020-07-24 18:14:00	2020-07-24 18:14:00	Slack Plugin - Conversation Management	"This is a test event from Slack," said dispatch@example.com	null	1	1	\N	2020-07-24 18:14:24.892976	2020-07-24 18:14:24.93177
20	13c86150-c8d6-4953-aa2e-24889af517b0	2020-07-24 18:11:55.29751	2020-07-24 18:11:55.29751	Incident Participant	dispatch@example.com created a new tactical report	{"conditions": "List of conditions", "actions": "List of actions", "needs": "List of needs"}	1	1	\N	2020-07-24 18:11:55.29797	2020-07-24 18:11:55.345595
\.


--
-- Data for Name: feedback; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.feedback (id, rating, feedback, incident_id, participant_id, updated_at, created_at) FROM stdin;
\.


--
-- Data for Name: group; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public."group" (resource_type, resource_id, weblink, id, name, email, incident_id, updated_at, created_at) FROM stdin;
google-group-participant-tactical-group	01y810tw0m3fgry	https://groups.google.com/a/example.com/forum/#!forum/dispatch-1	1	dispatch-1	dispatch-1@example.com	1	2020-07-24 18:02:52.532217	2020-07-24 18:02:52.506384
google-group-participant-notifications-group	02250f4o1gns9xu	https://groups.google.com/a/example.com/forum/#!forum/dispatch-1-notifications	2	dispatch-1-notifications	dispatch-1-notifications@example.com	1	2020-07-24 18:02:52.575776	2020-07-24 18:02:52.542604
\.


--
-- Data for Name: incident; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.incident (id, name, title, description, status, cost, visibility, reported_at, stable_at, closed_at, search_vector, incident_priority_id, incident_type_id, duplicate_id, updated_at, created_at) FROM stdin;
1	dispatch-1	Test incident	This is a test incident	Active	0	Open	2020-07-24 18:02:38.193482	\N	\N	'-1':2 'dispatch':1 'incid':4,9 'test':3,8	2	1	\N	2020-07-24 18:14:24.914404	2020-07-24 18:02:38.193491
\.


--
-- Data for Name: incident_priority; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.incident_priority (id, name, description, page_commander, tactical_report_reminder, executive_report_reminder, "default", view_order, search_vector) FROM stdin;
1	Low	Low priority incident.	f	12	9999	f	3	\N
2	Medium	Medium priority incident.	f	6	12	f	2	\N
3	High	High priority incident.	t	2	6	f	1	\N
\.


--
-- Data for Name: incident_type; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.incident_type (id, name, slug, description, exclude_from_metrics, "default", visibility, plugin_metadata, template_document_id, commander_service_id, search_vector, liaison_service_id) FROM stdin;
1	Vulnerability	\N	This is an incident involving a misconfiguration or vulnerability.	f	f	Open	[]	1	1	'incid':5 'involv':6 'misconfigur':8 'vulner':1,10	\N
\.


--
-- Data for Name: individual_contact; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.individual_contact (is_active, is_external, contact_type, email, company, notes, owner, id, name, mobile_phone, office_phone, title, weblink, team_contact_id, search_vector, created_at, updated_at) FROM stdin;
t	f	\N	dispatch@example.com	\N	\N	\N	1	dispatch@example.com	\N	\N	\N	Unknown	\N	'dispatch@example.com':1	2020-07-24 18:02:38.463871	2020-07-24 18:02:38.667258
\.


--
-- Data for Name: participant; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.participant (id, is_active, active_at, inactive_at, team, department, added_by_id, added_reason, location, after_hours_notification, incident_id, individual_contact_id) FROM stdin;
1	t	2020-07-24 18:02:38.614157	\N	Unknown	Unknown	\N	\N	Unknown	f	1	1
\.


--
-- Data for Name: participant_role; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.participant_role (id, assumed_at, renounced_at, role, participant_id) FROM stdin;
2	2020-07-24 18:02:38.590034	\N	Reporter	1
4	2020-07-24 18:02:40.638236	\N	Incident Commander	1
\.


--
-- Data for Name: plugin; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.plugin (id, title, slug, description, version, author, author_url, type, enabled, required, multiple, configuration, search_vector) FROM stdin;
1	Dispatch Plugin - Basic Authentication Provider	dispatch-auth-provider-basic	Generic basic authentication provider.	0.1.0	Netflix	https://github.com/netflix/dispatch.git	auth-provider	t	f	f	null	'authent':4 'basic':3 'dispatch':1 'plugin':2 'provid':5
3	Dispatch Plugin - Document Resolver	dispatch-document-resolver	Uses dispatch itself to resolve incident documents.	0.1.0	Netflix	https://github.com/netflix/dispatch.git	document-resolver	t	f	f	null	'dispatch':1 'document':3 'plugin':2 'resolv':4
4	Dispatch Plugin - PKCE Authentication Provider	dispatch-auth-provider-pkce	Generic PCKE authentication provider.	0.1.0	Netflix	https://github.com/netflix/dispatch.git	auth-provider	f	f	f	null	'authent':4 'dispatch':1 'pkce':3 'plugin':2 'provid':5
5	Dispatch Plugin - Participant Resolver	dispatch-participant-resolver	Uses dispatch itself to resolve incident participants.	0.1.0	Netflix	https://github.com/netflix/dispatch.git	participant	t	f	f	null	'dispatch':1 'particip':3 'plugin':2 'resolv':4
7	Google Calendar Plugin - Conference Management	google-calendar-conference	Uses Google calendar to manage conference rooms/meets.	0.1.0	Netflix	https://github.com/netflix/dispatch.git	conference	t	f	f	null	'calendar':2 'confer':4 'googl':1 'manag':5 'plugin':3
8	Google Docs Plugin - Document Management	google-docs-document	Uses Google docs to manage document contents.	0.1.0	Netflix	https://github.com/netflix/dispatch.git	document	t	f	f	null	'doc':2 'document':4 'googl':1 'manag':5 'plugin':3
9	Google Drive Plugin - Storage Management	google-drive-storage	Uses Google Drive to help manage incident storage.	0.1.0	Netflix	https://github.com/netflix/dispatch.git	storage	t	f	f	null	'drive':2 'googl':1 'manag':5 'plugin':3 'storag':4
10	Google Drive Plugin - Task Management	google-drive-task	Uses Google Drive to help manage incident tasks.	0.1.0	Netflix	https://github.com/netflix/dispatch.git	task	t	f	f	null	'drive':2 'googl':1 'manag':5 'plugin':3 'task':4
12	Google Group Plugin - Participant Group Management	google-group-participant-group	Uses Google Groups to help manage participant membership.	0.1.0	Netflix	https://github.com/netflix/dispatch.git	participant-group	t	f	f	null	'googl':1 'group':2,5 'manag':6 'particip':4 'plugin':3
14	PagerDuty Plugin - Oncall Management	pagerduty-oncall	Uses PagerDuty to resolve and page oncall teams.	0.1.0	Netflix	https://github.com/Netflix/dispatch	oncall	t	f	f	null	'manag':4 'oncal':3 'pagerduti':1 'plugin':2
16	Slack Plugin - Conversation Management	slack-conversation	Uses Slack to facilitate conversations.	0.1.0	Netflix	https://github.com/netflix/dispatch.git	conversation	t	f	f	null	'convers':3 'manag':4 'plugin':2 'slack':1
2	Dispatch Plugin - Contact plugin	dispatch-contact	Uses dispatch itself to resolve incident participants.	0.1.0	Netflix	https://github.com/netflix/dispatch.git	contact	t	f	f	null	'contact':3 'dispatch':1 'plugin':2,4
6	Dispatch Plugin - Ticket Management	dispatch-ticket	Uses dispatch itself to create a ticket.	0.1.0	Netflix	https://github.com/netflix/dispatch.git	ticket	t	f	f	null	'dispatch':1 'manag':4 'plugin':2 'ticket':3
11	Google Gmail Plugin - Email Management	google-gmail-email	Uses gmail to facilitate emails.	0.1.0	Netflix	https://github.com/netflix/dispatch.git	email	t	f	f	null	'email':4 'gmail':2 'googl':1 'manag':5 'plugin':3
13	Jira Plugin - Ticket Management	jira-ticket	Uses Jira to help manage external tickets.	0.1.0	Netflix	https://github.com/netflix/dispatch.git	ticket	f	f	f	null	'jira':1 'manag':4 'plugin':2 'ticket':3
15	Slack Plugin - Contact Information Resolver	slack-contact	Uses Slack to resolve contact information details.	0.1.0	Netflix	https://github.com/netflix/dispatch.git	contact	f	f	f	null	'contact':3 'inform':4 'plugin':2 'resolv':5 'slack':1
\.


--
-- Data for Name: policy; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.policy (id, name, description, expression, search_vector) FROM stdin;
\.


--
-- Data for Name: recommendation; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.recommendation (id, text) FROM stdin;
1	This is a test incident
2	This is a test incident
\.


--
-- Data for Name: recommendation_accuracy; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.recommendation_accuracy (id, recommendation_id, correct, resource_id, resource_type) FROM stdin;
\.


--
-- Data for Name: recommendation_documents; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.recommendation_documents (document_id, recommendation_id) FROM stdin;
\.


--
-- Data for Name: recommendation_incident_priorities; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.recommendation_incident_priorities (incident_priority_id, recommendation_id) FROM stdin;
2	1
2	2
\.


--
-- Data for Name: recommendation_incident_types; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.recommendation_incident_types (incident_type_id, recommendation_id) FROM stdin;
1	1
1	2
\.


--
-- Data for Name: recommendation_individual_contacts; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.recommendation_individual_contacts (individual_contact_id, recommendation_id) FROM stdin;
\.


--
-- Data for Name: recommendation_services; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.recommendation_services (service_id, recommendation_id) FROM stdin;
\.


--
-- Data for Name: recommendation_team_contacts; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.recommendation_team_contacts (team_contact_id, recommendation_id) FROM stdin;
\.


--
-- Data for Name: recommendation_terms; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.recommendation_terms (term_id, recommendation_id) FROM stdin;
\.


--
-- Data for Name: report; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.report (id, created_at, details, details_raw, type, incident_id, participant_id, search_vector) FROM stdin;
1	2020-07-24 18:11:55.229674	{"conditions": "List of conditions", "actions": "List of actions", "needs": "List of needs"}	List of conditions List of actions List of needs	Tactical Report	1	1	'action':6 'condit':3 'list':1,4,7 'need':9
\.


--
-- Data for Name: service; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.service (id, is_active, name, type, description, external_id, search_vector, updated_at, created_at) FROM stdin;
1	t	PagerDuty Oncall Service	pagerduty-oncall	Oncall service for handling incidents.	P8H4RFG	'oncal':2 'pagerduti':1 'servic':3	2020-07-24 17:25:36.696743	2020-07-24 17:25:36.696737
\.


--
-- Data for Name: service_incident; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.service_incident (incident_id, service_id) FROM stdin;
\.


--
-- Data for Name: service_incident_priority; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.service_incident_priority (incident_priority_id, service_id) FROM stdin;
\.


--
-- Data for Name: service_incident_type; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.service_incident_type (incident_type_id, service_id) FROM stdin;
\.


--
-- Data for Name: service_terms; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.service_terms (term_id, service_id) FROM stdin;
\.


--
-- Data for Name: storage; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.storage (resource_type, resource_id, weblink, id, incident_id, created_at, updated_at) FROM stdin;
google-drive-storage	1MAj7cmmpVsKS6M4DQ64x8uJv0p703VTg	https://drive.google.com/drive/folders/1MAj7cmmpVsKS6M4DQ64x8uJv0p703VTg	1	1	2020-07-24 18:02:57.32136	2020-07-24 18:02:57.337322
\.


--
-- Data for Name: tag; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.tag (id, name, description, uri, source, discoverable, search_vector, updated_at, created_at, tag_type_id) FROM stdin;
\.


--
-- Data for Name: tag_type; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.tag_type (id, name, description, search_vector, updated_at, created_at) FROM stdin;
\.


--
-- Data for Name: task; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.task (resource_type, resource_id, weblink, id, resolved_at, resolve_by, last_reminder_at, creator_id, description, source, priority, status, reminders, incident_id, search_vector, created_at, updated_at, owner_id) FROM stdin;
\.


--
-- Data for Name: task_assignees; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.task_assignees (participant_id, task_id) FROM stdin;
\.


--
-- Data for Name: task_tickets; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.task_tickets (ticket_id, task_id) FROM stdin;
\.


--
-- Data for Name: team_contact; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.team_contact (is_active, is_external, contact_type, email, company, owner, id, name, notes, search_vector, created_at, updated_at) FROM stdin;
\.


--
-- Data for Name: team_contact_incident; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.team_contact_incident (incident_id, team_contact_id) FROM stdin;
\.


--
-- Data for Name: team_contact_incident_priority; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.team_contact_incident_priority (incident_priority_id, team_contact_id) FROM stdin;
\.


--
-- Data for Name: team_contact_incident_type; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.team_contact_incident_type (incident_type_id, team_contact_id) FROM stdin;
\.


--
-- Data for Name: team_contact_terms; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.team_contact_terms (term_id, team_contact_id) FROM stdin;
\.


--
-- Data for Name: term; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.term (id, text, discoverable, search_vector) FROM stdin;
\.


--
-- Data for Name: ticket; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.ticket (resource_type, resource_id, weblink, id, incident_id, updated_at, created_at) FROM stdin;
dispatch-ticket	dispatch-1	http://localhost:8080/incidents/dispatch-1	1	1	2020-07-24 18:02:41.355332	2020-07-24 18:02:41.334229
\.


--
-- Data for Name: workflow; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.workflow (id, name, description, parameters, resource_id, search_vector, created_at, updated_at, plugin_id, enabled) FROM stdin;
\.


--
-- Data for Name: workflow_incident_priority; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.workflow_incident_priority (incident_priority_id, workflow_id) FROM stdin;
\.


--
-- Data for Name: workflow_incident_type; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.workflow_incident_type (incident_type_id, workflow_id) FROM stdin;
\.


--
-- Data for Name: workflow_instance; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.workflow_instance (resource_type, resource_id, weblink, id, workflow_id, creator_id, status, incident_id, created_at, updated_at, parameters, run_reason) FROM stdin;
\.


--
-- Data for Name: workflow_instance_artifact; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.workflow_instance_artifact (document_id, workflow_instance_id) FROM stdin;
\.


--
-- Data for Name: workflow_term; Type: TABLE DATA; Schema: public; Owner: dispatch
--

COPY public.workflow_term (term_id, workflow_id) FROM stdin;
\.


--
-- Name: conference_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.conference_id_seq', 1, true);


--
-- Name: conversation_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.conversation_id_seq', 1, true);


--
-- Name: definition_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.definition_id_seq', 1, false);


--
-- Name: dispatch_user_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.dispatch_user_id_seq', 3, true);


--
-- Name: document_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.document_id_seq', 6, true);


--
-- Name: event_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.event_id_seq', 21, true);


--
-- Name: feedback_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.feedback_id_seq', 1, false);


--
-- Name: group_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.group_id_seq', 2, true);


--
-- Name: incident_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.incident_id_seq', 1, true);


--
-- Name: incident_priority_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.incident_priority_id_seq', 3, true);


--
-- Name: incident_type_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.incident_type_id_seq', 1, true);


--
-- Name: individual_contact_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.individual_contact_id_seq', 3, true);


--
-- Name: participant_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.participant_id_seq', 3, true);


--
-- Name: participant_role_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.participant_role_id_seq', 6, true);


--
-- Name: plugin_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.plugin_id_seq', 16, true);


--
-- Name: policy_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.policy_id_seq', 1, false);


--
-- Name: recommendation_accuracy_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.recommendation_accuracy_id_seq', 1, false);


--
-- Name: recommendation_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.recommendation_id_seq', 2, true);


--
-- Name: report_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.report_id_seq', 1, true);


--
-- Name: service_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.service_id_seq', 1, true);


--
-- Name: storage_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.storage_id_seq', 1, true);


--
-- Name: tag_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.tag_id_seq', 1, false);


--
-- Name: tag_type_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.tag_type_id_seq', 1, false);


--
-- Name: task_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.task_id_seq', 1, false);


--
-- Name: team_contact_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.team_contact_id_seq', 1, false);


--
-- Name: term_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.term_id_seq', 1, false);


--
-- Name: ticket_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.ticket_id_seq', 1, true);


--
-- Name: workflow_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.workflow_id_seq', 1, false);


--
-- Name: workflow_instance_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dispatch
--

SELECT pg_catalog.setval('public.workflow_instance_id_seq', 1, false);


--
-- Name: alembic_version alembic_version_pkc; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.alembic_version
    ADD CONSTRAINT alembic_version_pkc PRIMARY KEY (version_num);


--
-- Name: assoc_incident_tags assoc_incident_tags_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.assoc_incident_tags
    ADD CONSTRAINT assoc_incident_tags_pkey PRIMARY KEY (incident_id, tag_id);


--
-- Name: assoc_incident_terms assoc_incident_terms_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.assoc_incident_terms
    ADD CONSTRAINT assoc_incident_terms_pkey PRIMARY KEY (incident_id, term_id);


--
-- Name: assoc_individual_contact_incident_priority assoc_individual_contact_incident_priority_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.assoc_individual_contact_incident_priority
    ADD CONSTRAINT assoc_individual_contact_incident_priority_pkey PRIMARY KEY (incident_priority_id, individual_contact_id);


--
-- Name: assoc_individual_contact_incident_type assoc_individual_contact_incident_type_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.assoc_individual_contact_incident_type
    ADD CONSTRAINT assoc_individual_contact_incident_type_pkey PRIMARY KEY (incident_type_id, individual_contact_id);


--
-- Name: assoc_individual_contact_terms assoc_individual_contact_terms_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.assoc_individual_contact_terms
    ADD CONSTRAINT assoc_individual_contact_terms_pkey PRIMARY KEY (term_id, individual_contact_id);


--
-- Name: conference conference_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.conference
    ADD CONSTRAINT conference_pkey PRIMARY KEY (id);


--
-- Name: conversation conversation_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.conversation
    ADD CONSTRAINT conversation_pkey PRIMARY KEY (id);


--
-- Name: definition definition_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.definition
    ADD CONSTRAINT definition_pkey PRIMARY KEY (id);


--
-- Name: definition_teams definition_teams_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.definition_teams
    ADD CONSTRAINT definition_teams_pkey PRIMARY KEY (definition_id, team_contact_id);


--
-- Name: definition_terms definition_terms_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.definition_terms
    ADD CONSTRAINT definition_terms_pkey PRIMARY KEY (definition_id, term_id);


--
-- Name: definition definition_text_key; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.definition
    ADD CONSTRAINT definition_text_key UNIQUE (text);


--
-- Name: dispatch_user dispatch_user_email_key; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.dispatch_user
    ADD CONSTRAINT dispatch_user_email_key UNIQUE (email);


--
-- Name: dispatch_user dispatch_user_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.dispatch_user
    ADD CONSTRAINT dispatch_user_pkey PRIMARY KEY (id);


--
-- Name: document_incident document_incident_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.document_incident
    ADD CONSTRAINT document_incident_pkey PRIMARY KEY (incident_id, document_id);


--
-- Name: document_incident_priority document_incident_priority_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.document_incident_priority
    ADD CONSTRAINT document_incident_priority_pkey PRIMARY KEY (incident_priority_id, document_id);


--
-- Name: document_incident_type document_incident_type_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.document_incident_type
    ADD CONSTRAINT document_incident_type_pkey PRIMARY KEY (incident_type_id, document_id);


--
-- Name: document document_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.document
    ADD CONSTRAINT document_pkey PRIMARY KEY (id);


--
-- Name: document_terms document_terms_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.document_terms
    ADD CONSTRAINT document_terms_pkey PRIMARY KEY (term_id, document_id);


--
-- Name: event event_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.event
    ADD CONSTRAINT event_pkey PRIMARY KEY (id);


--
-- Name: event event_uuid_key; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.event
    ADD CONSTRAINT event_uuid_key UNIQUE (uuid);


--
-- Name: feedback feedback_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.feedback
    ADD CONSTRAINT feedback_pkey PRIMARY KEY (id);


--
-- Name: group group_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public."group"
    ADD CONSTRAINT group_pkey PRIMARY KEY (id);


--
-- Name: incident incident_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.incident
    ADD CONSTRAINT incident_pkey PRIMARY KEY (id);


--
-- Name: incident_priority incident_priority_name_key; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.incident_priority
    ADD CONSTRAINT incident_priority_name_key UNIQUE (name);


--
-- Name: incident_priority incident_priority_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.incident_priority
    ADD CONSTRAINT incident_priority_pkey PRIMARY KEY (id);


--
-- Name: incident_type incident_type_name_key; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.incident_type
    ADD CONSTRAINT incident_type_name_key UNIQUE (name);


--
-- Name: incident_type incident_type_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.incident_type
    ADD CONSTRAINT incident_type_pkey PRIMARY KEY (id);


--
-- Name: individual_contact individual_contact_email_key; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.individual_contact
    ADD CONSTRAINT individual_contact_email_key UNIQUE (email);


--
-- Name: individual_contact individual_contact_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.individual_contact
    ADD CONSTRAINT individual_contact_pkey PRIMARY KEY (id);


--
-- Name: participant participant_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.participant
    ADD CONSTRAINT participant_pkey PRIMARY KEY (id);


--
-- Name: participant_role participant_role_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.participant_role
    ADD CONSTRAINT participant_role_pkey PRIMARY KEY (id);


--
-- Name: plugin plugin_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.plugin
    ADD CONSTRAINT plugin_pkey PRIMARY KEY (id);


--
-- Name: plugin plugin_slug_key; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.plugin
    ADD CONSTRAINT plugin_slug_key UNIQUE (slug);


--
-- Name: policy policy_name_key; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.policy
    ADD CONSTRAINT policy_name_key UNIQUE (name);


--
-- Name: policy policy_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.policy
    ADD CONSTRAINT policy_pkey PRIMARY KEY (id);


--
-- Name: recommendation_accuracy recommendation_accuracy_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation_accuracy
    ADD CONSTRAINT recommendation_accuracy_pkey PRIMARY KEY (id);


--
-- Name: recommendation_documents recommendation_documents_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation_documents
    ADD CONSTRAINT recommendation_documents_pkey PRIMARY KEY (document_id, recommendation_id);


--
-- Name: recommendation_incident_priorities recommendation_incident_priorities_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation_incident_priorities
    ADD CONSTRAINT recommendation_incident_priorities_pkey PRIMARY KEY (incident_priority_id, recommendation_id);


--
-- Name: recommendation_incident_types recommendation_incident_types_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation_incident_types
    ADD CONSTRAINT recommendation_incident_types_pkey PRIMARY KEY (incident_type_id, recommendation_id);


--
-- Name: recommendation_individual_contacts recommendation_individual_contacts_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation_individual_contacts
    ADD CONSTRAINT recommendation_individual_contacts_pkey PRIMARY KEY (individual_contact_id, recommendation_id);


--
-- Name: recommendation recommendation_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation
    ADD CONSTRAINT recommendation_pkey PRIMARY KEY (id);


--
-- Name: recommendation_services recommendation_services_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation_services
    ADD CONSTRAINT recommendation_services_pkey PRIMARY KEY (service_id, recommendation_id);


--
-- Name: recommendation_team_contacts recommendation_team_contacts_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation_team_contacts
    ADD CONSTRAINT recommendation_team_contacts_pkey PRIMARY KEY (team_contact_id, recommendation_id);


--
-- Name: recommendation_terms recommendation_terms_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation_terms
    ADD CONSTRAINT recommendation_terms_pkey PRIMARY KEY (term_id, recommendation_id);


--
-- Name: report report_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.report
    ADD CONSTRAINT report_pkey PRIMARY KEY (id);


--
-- Name: service_incident service_incident_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.service_incident
    ADD CONSTRAINT service_incident_pkey PRIMARY KEY (incident_id, service_id);


--
-- Name: service_incident_priority service_incident_priority_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.service_incident_priority
    ADD CONSTRAINT service_incident_priority_pkey PRIMARY KEY (incident_priority_id, service_id);


--
-- Name: service_incident_type service_incident_type_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.service_incident_type
    ADD CONSTRAINT service_incident_type_pkey PRIMARY KEY (incident_type_id, service_id);


--
-- Name: service service_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.service
    ADD CONSTRAINT service_pkey PRIMARY KEY (id);


--
-- Name: service_terms service_terms_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.service_terms
    ADD CONSTRAINT service_terms_pkey PRIMARY KEY (term_id, service_id);


--
-- Name: storage storage_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.storage
    ADD CONSTRAINT storage_pkey PRIMARY KEY (id);


--
-- Name: tag tag_name_key; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.tag
    ADD CONSTRAINT tag_name_key UNIQUE (name);


--
-- Name: tag tag_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.tag
    ADD CONSTRAINT tag_pkey PRIMARY KEY (id);


--
-- Name: tag_type tag_type_name_key; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.tag_type
    ADD CONSTRAINT tag_type_name_key UNIQUE (name);


--
-- Name: tag_type tag_type_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.tag_type
    ADD CONSTRAINT tag_type_pkey PRIMARY KEY (id);


--
-- Name: task_assignees task_assignees_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.task_assignees
    ADD CONSTRAINT task_assignees_pkey PRIMARY KEY (participant_id, task_id);


--
-- Name: task task_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.task
    ADD CONSTRAINT task_pkey PRIMARY KEY (id);


--
-- Name: task_tickets task_tickets_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.task_tickets
    ADD CONSTRAINT task_tickets_pkey PRIMARY KEY (ticket_id, task_id);


--
-- Name: team_contact team_contact_email_key; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.team_contact
    ADD CONSTRAINT team_contact_email_key UNIQUE (email);


--
-- Name: team_contact_incident team_contact_incident_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.team_contact_incident
    ADD CONSTRAINT team_contact_incident_pkey PRIMARY KEY (incident_id, team_contact_id);


--
-- Name: team_contact_incident_priority team_contact_incident_priority_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.team_contact_incident_priority
    ADD CONSTRAINT team_contact_incident_priority_pkey PRIMARY KEY (incident_priority_id, team_contact_id);


--
-- Name: team_contact_incident_type team_contact_incident_type_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.team_contact_incident_type
    ADD CONSTRAINT team_contact_incident_type_pkey PRIMARY KEY (incident_type_id, team_contact_id);


--
-- Name: team_contact team_contact_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.team_contact
    ADD CONSTRAINT team_contact_pkey PRIMARY KEY (id);


--
-- Name: team_contact_terms team_contact_terms_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.team_contact_terms
    ADD CONSTRAINT team_contact_terms_pkey PRIMARY KEY (term_id, team_contact_id);


--
-- Name: term term_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.term
    ADD CONSTRAINT term_pkey PRIMARY KEY (id);


--
-- Name: term term_text_key; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.term
    ADD CONSTRAINT term_text_key UNIQUE (text);


--
-- Name: ticket ticket_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.ticket
    ADD CONSTRAINT ticket_pkey PRIMARY KEY (id);


--
-- Name: workflow_incident_priority workflow_incident_priority_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.workflow_incident_priority
    ADD CONSTRAINT workflow_incident_priority_pkey PRIMARY KEY (incident_priority_id, workflow_id);


--
-- Name: workflow_incident_type workflow_incident_type_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.workflow_incident_type
    ADD CONSTRAINT workflow_incident_type_pkey PRIMARY KEY (incident_type_id, workflow_id);


--
-- Name: workflow_instance_artifact workflow_instance_artifact_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.workflow_instance_artifact
    ADD CONSTRAINT workflow_instance_artifact_pkey PRIMARY KEY (document_id, workflow_instance_id);


--
-- Name: workflow_instance workflow_instance_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.workflow_instance
    ADD CONSTRAINT workflow_instance_pkey PRIMARY KEY (id);


--
-- Name: workflow workflow_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.workflow
    ADD CONSTRAINT workflow_pkey PRIMARY KEY (id);


--
-- Name: workflow_term workflow_term_pkey; Type: CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.workflow_term
    ADD CONSTRAINT workflow_term_pkey PRIMARY KEY (term_id, workflow_id);


--
-- Name: ix_definition_search_vector; Type: INDEX; Schema: public; Owner: dispatch
--

CREATE INDEX ix_definition_search_vector ON public.definition USING gin (search_vector);


--
-- Name: ix_dispatch_user_search_vector; Type: INDEX; Schema: public; Owner: dispatch
--

CREATE INDEX ix_dispatch_user_search_vector ON public.dispatch_user USING gin (search_vector);


--
-- Name: ix_document_search_vector; Type: INDEX; Schema: public; Owner: dispatch
--

CREATE INDEX ix_document_search_vector ON public.document USING gin (search_vector);


--
-- Name: ix_event_search_vector; Type: INDEX; Schema: public; Owner: dispatch
--

CREATE INDEX ix_event_search_vector ON public.event USING gin (search_vector);


--
-- Name: ix_incident_priority_search_vector; Type: INDEX; Schema: public; Owner: dispatch
--

CREATE INDEX ix_incident_priority_search_vector ON public.incident_priority USING gin (search_vector);


--
-- Name: ix_incident_search_vector; Type: INDEX; Schema: public; Owner: dispatch
--

CREATE INDEX ix_incident_search_vector ON public.incident USING gin (search_vector);


--
-- Name: ix_incident_type_search_vector; Type: INDEX; Schema: public; Owner: dispatch
--

CREATE INDEX ix_incident_type_search_vector ON public.incident_type USING gin (search_vector);


--
-- Name: ix_individual_contact_search_vector; Type: INDEX; Schema: public; Owner: dispatch
--

CREATE INDEX ix_individual_contact_search_vector ON public.individual_contact USING gin (search_vector);


--
-- Name: ix_plugin_search_vector; Type: INDEX; Schema: public; Owner: dispatch
--

CREATE INDEX ix_plugin_search_vector ON public.plugin USING gin (search_vector);


--
-- Name: ix_policy_search_vector; Type: INDEX; Schema: public; Owner: dispatch
--

CREATE INDEX ix_policy_search_vector ON public.policy USING gin (search_vector);


--
-- Name: ix_report_search_vector; Type: INDEX; Schema: public; Owner: dispatch
--

CREATE INDEX ix_report_search_vector ON public.report USING gin (search_vector);


--
-- Name: ix_service_search_vector; Type: INDEX; Schema: public; Owner: dispatch
--

CREATE INDEX ix_service_search_vector ON public.service USING gin (search_vector);


--
-- Name: ix_tag_search_vector; Type: INDEX; Schema: public; Owner: dispatch
--

CREATE INDEX ix_tag_search_vector ON public.tag USING gin (search_vector);


--
-- Name: ix_tag_type_search_vector; Type: INDEX; Schema: public; Owner: dispatch
--

CREATE INDEX ix_tag_type_search_vector ON public.tag_type USING gin (search_vector);


--
-- Name: ix_task_search_vector; Type: INDEX; Schema: public; Owner: dispatch
--

CREATE INDEX ix_task_search_vector ON public.task USING gin (search_vector);


--
-- Name: ix_team_contact_search_vector; Type: INDEX; Schema: public; Owner: dispatch
--

CREATE INDEX ix_team_contact_search_vector ON public.team_contact USING gin (search_vector);


--
-- Name: ix_term_search_vector; Type: INDEX; Schema: public; Owner: dispatch
--

CREATE INDEX ix_term_search_vector ON public.term USING gin (search_vector);


--
-- Name: ix_workflow_search_vector; Type: INDEX; Schema: public; Owner: dispatch
--

CREATE INDEX ix_workflow_search_vector ON public.workflow USING gin (search_vector);


--
-- Name: definition definition_search_vector_trigger; Type: TRIGGER; Schema: public; Owner: dispatch
--

CREATE TRIGGER definition_search_vector_trigger BEFORE INSERT OR UPDATE ON public.definition FOR EACH ROW EXECUTE FUNCTION tsvector_update_trigger('search_vector', 'pg_catalog.english', 'text');


--
-- Name: dispatch_user dispatch_user_search_vector_trigger; Type: TRIGGER; Schema: public; Owner: dispatch
--

CREATE TRIGGER dispatch_user_search_vector_trigger BEFORE INSERT OR UPDATE ON public.dispatch_user FOR EACH ROW EXECUTE FUNCTION tsvector_update_trigger('search_vector', 'pg_catalog.english', 'email');


--
-- Name: document document_search_vector_trigger; Type: TRIGGER; Schema: public; Owner: dispatch
--

CREATE TRIGGER document_search_vector_trigger BEFORE INSERT OR UPDATE ON public.document FOR EACH ROW EXECUTE FUNCTION tsvector_update_trigger('search_vector', 'pg_catalog.english', 'name');


--
-- Name: incident incident_search_vector_trigger; Type: TRIGGER; Schema: public; Owner: dispatch
--

CREATE TRIGGER incident_search_vector_trigger BEFORE INSERT OR UPDATE ON public.incident FOR EACH ROW EXECUTE FUNCTION tsvector_update_trigger('search_vector', 'pg_catalog.english', 'name', 'title', 'description');


--
-- Name: incident_type incident_type_search_vector_trigger; Type: TRIGGER; Schema: public; Owner: dispatch
--

CREATE TRIGGER incident_type_search_vector_trigger BEFORE INSERT OR UPDATE ON public.incident_type FOR EACH ROW EXECUTE FUNCTION tsvector_update_trigger('search_vector', 'pg_catalog.english', 'name', 'description');


--
-- Name: individual_contact individual_contact_search_vector_trigger; Type: TRIGGER; Schema: public; Owner: dispatch
--

CREATE TRIGGER individual_contact_search_vector_trigger BEFORE INSERT OR UPDATE ON public.individual_contact FOR EACH ROW EXECUTE FUNCTION tsvector_update_trigger('search_vector', 'pg_catalog.english', 'name', 'title', 'company', 'notes');


--
-- Name: plugin plugin_search_vector_trigger; Type: TRIGGER; Schema: public; Owner: dispatch
--

CREATE TRIGGER plugin_search_vector_trigger BEFORE INSERT OR UPDATE ON public.plugin FOR EACH ROW EXECUTE FUNCTION tsvector_update_trigger('search_vector', 'pg_catalog.english', 'title');


--
-- Name: policy policy_search_vector_trigger; Type: TRIGGER; Schema: public; Owner: dispatch
--

CREATE TRIGGER policy_search_vector_trigger BEFORE INSERT OR UPDATE ON public.policy FOR EACH ROW EXECUTE FUNCTION tsvector_update_trigger('search_vector', 'pg_catalog.english', 'name', 'description');


--
-- Name: report report_search_vector_trigger; Type: TRIGGER; Schema: public; Owner: dispatch
--

CREATE TRIGGER report_search_vector_trigger BEFORE INSERT OR UPDATE ON public.report FOR EACH ROW EXECUTE FUNCTION tsvector_update_trigger('search_vector', 'pg_catalog.english', 'details_raw');


--
-- Name: service service_search_vector_trigger; Type: TRIGGER; Schema: public; Owner: dispatch
--

CREATE TRIGGER service_search_vector_trigger BEFORE INSERT OR UPDATE ON public.service FOR EACH ROW EXECUTE FUNCTION tsvector_update_trigger('search_vector', 'pg_catalog.english', 'name');


--
-- Name: tag tag_search_vector_trigger; Type: TRIGGER; Schema: public; Owner: dispatch
--

CREATE TRIGGER tag_search_vector_trigger BEFORE INSERT OR UPDATE ON public.tag FOR EACH ROW EXECUTE FUNCTION tsvector_update_trigger('search_vector', 'pg_catalog.english', 'name');


--
-- Name: task task_search_vector_trigger; Type: TRIGGER; Schema: public; Owner: dispatch
--

CREATE TRIGGER task_search_vector_trigger BEFORE INSERT OR UPDATE ON public.task FOR EACH ROW EXECUTE FUNCTION tsvector_update_trigger('search_vector', 'pg_catalog.english', 'description');


--
-- Name: team_contact team_contact_search_vector_trigger; Type: TRIGGER; Schema: public; Owner: dispatch
--

CREATE TRIGGER team_contact_search_vector_trigger BEFORE INSERT OR UPDATE ON public.team_contact FOR EACH ROW EXECUTE FUNCTION tsvector_update_trigger('search_vector', 'pg_catalog.english', 'name', 'company', 'notes');


--
-- Name: term term_search_vector_trigger; Type: TRIGGER; Schema: public; Owner: dispatch
--

CREATE TRIGGER term_search_vector_trigger BEFORE INSERT OR UPDATE ON public.term FOR EACH ROW EXECUTE FUNCTION tsvector_update_trigger('search_vector', 'pg_catalog.english', 'text');


--
-- Name: workflow workflow_search_vector_trigger; Type: TRIGGER; Schema: public; Owner: dispatch
--

CREATE TRIGGER workflow_search_vector_trigger BEFORE INSERT OR UPDATE ON public.workflow FOR EACH ROW EXECUTE FUNCTION tsvector_update_trigger('search_vector', 'pg_catalog.english', 'name', 'description');


--
-- Name: assoc_incident_tags assoc_incident_tags_incident_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.assoc_incident_tags
    ADD CONSTRAINT assoc_incident_tags_incident_id_fkey FOREIGN KEY (incident_id) REFERENCES public.incident(id);


--
-- Name: assoc_incident_tags assoc_incident_tags_tag_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.assoc_incident_tags
    ADD CONSTRAINT assoc_incident_tags_tag_id_fkey FOREIGN KEY (tag_id) REFERENCES public.tag(id);


--
-- Name: assoc_incident_terms assoc_incident_terms_incident_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.assoc_incident_terms
    ADD CONSTRAINT assoc_incident_terms_incident_id_fkey FOREIGN KEY (incident_id) REFERENCES public.incident(id);


--
-- Name: assoc_incident_terms assoc_incident_terms_term_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.assoc_incident_terms
    ADD CONSTRAINT assoc_incident_terms_term_id_fkey FOREIGN KEY (term_id) REFERENCES public.term(id);


--
-- Name: assoc_individual_contact_incident_priority assoc_individual_contact_incident_pr_individual_contact_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.assoc_individual_contact_incident_priority
    ADD CONSTRAINT assoc_individual_contact_incident_pr_individual_contact_id_fkey FOREIGN KEY (individual_contact_id) REFERENCES public.individual_contact(id);


--
-- Name: assoc_individual_contact_incident_priority assoc_individual_contact_incident_pri_incident_priority_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.assoc_individual_contact_incident_priority
    ADD CONSTRAINT assoc_individual_contact_incident_pri_incident_priority_id_fkey FOREIGN KEY (incident_priority_id) REFERENCES public.incident_priority(id);


--
-- Name: assoc_individual_contact_incident_type assoc_individual_contact_incident_ty_individual_contact_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.assoc_individual_contact_incident_type
    ADD CONSTRAINT assoc_individual_contact_incident_ty_individual_contact_id_fkey FOREIGN KEY (individual_contact_id) REFERENCES public.individual_contact(id);


--
-- Name: assoc_individual_contact_incident_type assoc_individual_contact_incident_type_incident_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.assoc_individual_contact_incident_type
    ADD CONSTRAINT assoc_individual_contact_incident_type_incident_type_id_fkey FOREIGN KEY (incident_type_id) REFERENCES public.incident_type(id);


--
-- Name: assoc_individual_contact_terms assoc_individual_contact_terms_individual_contact_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.assoc_individual_contact_terms
    ADD CONSTRAINT assoc_individual_contact_terms_individual_contact_id_fkey FOREIGN KEY (individual_contact_id) REFERENCES public.individual_contact(id);


--
-- Name: assoc_individual_contact_terms assoc_individual_contact_terms_term_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.assoc_individual_contact_terms
    ADD CONSTRAINT assoc_individual_contact_terms_term_id_fkey FOREIGN KEY (term_id) REFERENCES public.term(id);


--
-- Name: conference conference_incident_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.conference
    ADD CONSTRAINT conference_incident_id_fkey FOREIGN KEY (incident_id) REFERENCES public.incident(id);


--
-- Name: conversation conversation_incident_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.conversation
    ADD CONSTRAINT conversation_incident_id_fkey FOREIGN KEY (incident_id) REFERENCES public.incident(id);


--
-- Name: definition_teams definition_teams_definition_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.definition_teams
    ADD CONSTRAINT definition_teams_definition_id_fkey FOREIGN KEY (definition_id) REFERENCES public.definition(id);


--
-- Name: definition_teams definition_teams_team_contact_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.definition_teams
    ADD CONSTRAINT definition_teams_team_contact_id_fkey FOREIGN KEY (team_contact_id) REFERENCES public.team_contact(id);


--
-- Name: definition_terms definition_terms_definition_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.definition_terms
    ADD CONSTRAINT definition_terms_definition_id_fkey FOREIGN KEY (definition_id) REFERENCES public.definition(id);


--
-- Name: definition_terms definition_terms_term_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.definition_terms
    ADD CONSTRAINT definition_terms_term_id_fkey FOREIGN KEY (term_id) REFERENCES public.term(id);


--
-- Name: document_incident document_incident_document_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.document_incident
    ADD CONSTRAINT document_incident_document_id_fkey FOREIGN KEY (document_id) REFERENCES public.document(id);


--
-- Name: document document_incident_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.document
    ADD CONSTRAINT document_incident_id_fkey FOREIGN KEY (incident_id) REFERENCES public.incident(id);


--
-- Name: document_incident document_incident_incident_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.document_incident
    ADD CONSTRAINT document_incident_incident_id_fkey FOREIGN KEY (incident_id) REFERENCES public.incident(id);


--
-- Name: document_incident_priority document_incident_priority_document_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.document_incident_priority
    ADD CONSTRAINT document_incident_priority_document_id_fkey FOREIGN KEY (document_id) REFERENCES public.document(id);


--
-- Name: document_incident_priority document_incident_priority_incident_priority_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.document_incident_priority
    ADD CONSTRAINT document_incident_priority_incident_priority_id_fkey FOREIGN KEY (incident_priority_id) REFERENCES public.incident_priority(id);


--
-- Name: document_incident_type document_incident_type_document_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.document_incident_type
    ADD CONSTRAINT document_incident_type_document_id_fkey FOREIGN KEY (document_id) REFERENCES public.document(id);


--
-- Name: document_incident_type document_incident_type_incident_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.document_incident_type
    ADD CONSTRAINT document_incident_type_incident_type_id_fkey FOREIGN KEY (incident_type_id) REFERENCES public.incident_type(id);


--
-- Name: document document_report_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.document
    ADD CONSTRAINT document_report_id_fkey FOREIGN KEY (report_id) REFERENCES public.report(id);


--
-- Name: document_terms document_terms_document_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.document_terms
    ADD CONSTRAINT document_terms_document_id_fkey FOREIGN KEY (document_id) REFERENCES public.document(id);


--
-- Name: document_terms document_terms_term_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.document_terms
    ADD CONSTRAINT document_terms_term_id_fkey FOREIGN KEY (term_id) REFERENCES public.term(id);


--
-- Name: event event_incident_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.event
    ADD CONSTRAINT event_incident_id_fkey FOREIGN KEY (incident_id) REFERENCES public.incident(id);


--
-- Name: event event_individual_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.event
    ADD CONSTRAINT event_individual_id_fkey FOREIGN KEY (individual_id) REFERENCES public.individual_contact(id);


--
-- Name: feedback feedback_incident_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.feedback
    ADD CONSTRAINT feedback_incident_id_fkey FOREIGN KEY (incident_id) REFERENCES public.incident(id);


--
-- Name: feedback feedback_participant_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.feedback
    ADD CONSTRAINT feedback_participant_id_fkey FOREIGN KEY (participant_id) REFERENCES public.participant(id);


--
-- Name: group group_incident_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public."group"
    ADD CONSTRAINT group_incident_id_fkey FOREIGN KEY (incident_id) REFERENCES public.incident(id);


--
-- Name: incident incident_duplicate_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.incident
    ADD CONSTRAINT incident_duplicate_id_fkey FOREIGN KEY (duplicate_id) REFERENCES public.incident(id);


--
-- Name: incident incident_incident_priority_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.incident
    ADD CONSTRAINT incident_incident_priority_id_fkey FOREIGN KEY (incident_priority_id) REFERENCES public.incident_priority(id);


--
-- Name: incident incident_incident_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.incident
    ADD CONSTRAINT incident_incident_type_id_fkey FOREIGN KEY (incident_type_id) REFERENCES public.incident_type(id);


--
-- Name: incident_type incident_type_commander_service_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.incident_type
    ADD CONSTRAINT incident_type_commander_service_id_fkey FOREIGN KEY (commander_service_id) REFERENCES public.service(id);


--
-- Name: incident_type incident_type_liaison_service_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.incident_type
    ADD CONSTRAINT incident_type_liaison_service_id_fkey FOREIGN KEY (liaison_service_id) REFERENCES public.service(id);


--
-- Name: incident_type incident_type_template_document_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.incident_type
    ADD CONSTRAINT incident_type_template_document_id_fkey FOREIGN KEY (template_document_id) REFERENCES public.document(id);


--
-- Name: individual_contact individual_contact_team_contact_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.individual_contact
    ADD CONSTRAINT individual_contact_team_contact_id_fkey FOREIGN KEY (team_contact_id) REFERENCES public.team_contact(id);


--
-- Name: participant participant_added_by_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.participant
    ADD CONSTRAINT participant_added_by_id_fkey FOREIGN KEY (added_by_id) REFERENCES public.participant(id);


--
-- Name: participant participant_incident_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.participant
    ADD CONSTRAINT participant_incident_id_fkey FOREIGN KEY (incident_id) REFERENCES public.incident(id);


--
-- Name: participant participant_individual_contact_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.participant
    ADD CONSTRAINT participant_individual_contact_id_fkey FOREIGN KEY (individual_contact_id) REFERENCES public.individual_contact(id);


--
-- Name: participant_role participant_role_participant_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.participant_role
    ADD CONSTRAINT participant_role_participant_id_fkey FOREIGN KEY (participant_id) REFERENCES public.participant(id);


--
-- Name: recommendation_accuracy recommendation_accuracy_recommendation_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation_accuracy
    ADD CONSTRAINT recommendation_accuracy_recommendation_id_fkey FOREIGN KEY (recommendation_id) REFERENCES public.recommendation(id);


--
-- Name: recommendation_documents recommendation_documents_document_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation_documents
    ADD CONSTRAINT recommendation_documents_document_id_fkey FOREIGN KEY (document_id) REFERENCES public.document(id);


--
-- Name: recommendation_documents recommendation_documents_recommendation_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation_documents
    ADD CONSTRAINT recommendation_documents_recommendation_id_fkey FOREIGN KEY (recommendation_id) REFERENCES public.recommendation(id);


--
-- Name: recommendation_incident_priorities recommendation_incident_priorities_incident_priority_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation_incident_priorities
    ADD CONSTRAINT recommendation_incident_priorities_incident_priority_id_fkey FOREIGN KEY (incident_priority_id) REFERENCES public.incident_priority(id);


--
-- Name: recommendation_incident_priorities recommendation_incident_priorities_recommendation_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation_incident_priorities
    ADD CONSTRAINT recommendation_incident_priorities_recommendation_id_fkey FOREIGN KEY (recommendation_id) REFERENCES public.recommendation(id);


--
-- Name: recommendation_incident_types recommendation_incident_types_incident_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation_incident_types
    ADD CONSTRAINT recommendation_incident_types_incident_type_id_fkey FOREIGN KEY (incident_type_id) REFERENCES public.incident_type(id);


--
-- Name: recommendation_incident_types recommendation_incident_types_recommendation_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation_incident_types
    ADD CONSTRAINT recommendation_incident_types_recommendation_id_fkey FOREIGN KEY (recommendation_id) REFERENCES public.recommendation(id);


--
-- Name: recommendation_individual_contacts recommendation_individual_contacts_individual_contact_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation_individual_contacts
    ADD CONSTRAINT recommendation_individual_contacts_individual_contact_id_fkey FOREIGN KEY (individual_contact_id) REFERENCES public.individual_contact(id);


--
-- Name: recommendation_individual_contacts recommendation_individual_contacts_recommendation_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation_individual_contacts
    ADD CONSTRAINT recommendation_individual_contacts_recommendation_id_fkey FOREIGN KEY (recommendation_id) REFERENCES public.recommendation(id);


--
-- Name: recommendation_services recommendation_services_recommendation_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation_services
    ADD CONSTRAINT recommendation_services_recommendation_id_fkey FOREIGN KEY (recommendation_id) REFERENCES public.recommendation(id);


--
-- Name: recommendation_services recommendation_services_service_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation_services
    ADD CONSTRAINT recommendation_services_service_id_fkey FOREIGN KEY (service_id) REFERENCES public.service(id);


--
-- Name: recommendation_team_contacts recommendation_team_contacts_recommendation_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation_team_contacts
    ADD CONSTRAINT recommendation_team_contacts_recommendation_id_fkey FOREIGN KEY (recommendation_id) REFERENCES public.recommendation(id);


--
-- Name: recommendation_team_contacts recommendation_team_contacts_team_contact_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation_team_contacts
    ADD CONSTRAINT recommendation_team_contacts_team_contact_id_fkey FOREIGN KEY (team_contact_id) REFERENCES public.team_contact(id);


--
-- Name: recommendation_terms recommendation_terms_recommendation_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation_terms
    ADD CONSTRAINT recommendation_terms_recommendation_id_fkey FOREIGN KEY (recommendation_id) REFERENCES public.recommendation(id);


--
-- Name: recommendation_terms recommendation_terms_term_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.recommendation_terms
    ADD CONSTRAINT recommendation_terms_term_id_fkey FOREIGN KEY (term_id) REFERENCES public.term(id);


--
-- Name: report report_incident_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.report
    ADD CONSTRAINT report_incident_id_fkey FOREIGN KEY (incident_id) REFERENCES public.incident(id);


--
-- Name: report report_participant_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.report
    ADD CONSTRAINT report_participant_id_fkey FOREIGN KEY (participant_id) REFERENCES public.participant(id);


--
-- Name: service_incident service_incident_incident_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.service_incident
    ADD CONSTRAINT service_incident_incident_id_fkey FOREIGN KEY (incident_id) REFERENCES public.incident(id);


--
-- Name: service_incident_priority service_incident_priority_incident_priority_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.service_incident_priority
    ADD CONSTRAINT service_incident_priority_incident_priority_id_fkey FOREIGN KEY (incident_priority_id) REFERENCES public.incident_priority(id);


--
-- Name: service_incident_priority service_incident_priority_service_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.service_incident_priority
    ADD CONSTRAINT service_incident_priority_service_id_fkey FOREIGN KEY (service_id) REFERENCES public.service(id);


--
-- Name: service_incident service_incident_service_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.service_incident
    ADD CONSTRAINT service_incident_service_id_fkey FOREIGN KEY (service_id) REFERENCES public.service(id);


--
-- Name: service_incident_type service_incident_type_incident_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.service_incident_type
    ADD CONSTRAINT service_incident_type_incident_type_id_fkey FOREIGN KEY (incident_type_id) REFERENCES public.incident_type(id);


--
-- Name: service_incident_type service_incident_type_service_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.service_incident_type
    ADD CONSTRAINT service_incident_type_service_id_fkey FOREIGN KEY (service_id) REFERENCES public.service(id);


--
-- Name: service_terms service_terms_service_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.service_terms
    ADD CONSTRAINT service_terms_service_id_fkey FOREIGN KEY (service_id) REFERENCES public.service(id);


--
-- Name: service_terms service_terms_term_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.service_terms
    ADD CONSTRAINT service_terms_term_id_fkey FOREIGN KEY (term_id) REFERENCES public.term(id);


--
-- Name: storage storage_incident_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.storage
    ADD CONSTRAINT storage_incident_id_fkey FOREIGN KEY (incident_id) REFERENCES public.incident(id);


--
-- Name: tag tag_tag_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.tag
    ADD CONSTRAINT tag_tag_type_id_fkey FOREIGN KEY (tag_type_id) REFERENCES public.tag_type(id);


--
-- Name: task_assignees task_assignees_participant_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.task_assignees
    ADD CONSTRAINT task_assignees_participant_id_fkey FOREIGN KEY (participant_id) REFERENCES public.participant(id);


--
-- Name: task_assignees task_assignees_task_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.task_assignees
    ADD CONSTRAINT task_assignees_task_id_fkey FOREIGN KEY (task_id) REFERENCES public.task(id);


--
-- Name: task task_creator_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.task
    ADD CONSTRAINT task_creator_id_fkey FOREIGN KEY (creator_id) REFERENCES public.participant(id);


--
-- Name: task task_incident_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.task
    ADD CONSTRAINT task_incident_id_fkey FOREIGN KEY (incident_id) REFERENCES public.incident(id);


--
-- Name: task task_owner_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.task
    ADD CONSTRAINT task_owner_id_fkey FOREIGN KEY (owner_id) REFERENCES public.participant(id);


--
-- Name: task_tickets task_tickets_task_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.task_tickets
    ADD CONSTRAINT task_tickets_task_id_fkey FOREIGN KEY (task_id) REFERENCES public.task(id);


--
-- Name: task_tickets task_tickets_ticket_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.task_tickets
    ADD CONSTRAINT task_tickets_ticket_id_fkey FOREIGN KEY (ticket_id) REFERENCES public.ticket(id);


--
-- Name: team_contact_incident team_contact_incident_incident_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.team_contact_incident
    ADD CONSTRAINT team_contact_incident_incident_id_fkey FOREIGN KEY (incident_id) REFERENCES public.incident(id);


--
-- Name: team_contact_incident_priority team_contact_incident_priority_incident_priority_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.team_contact_incident_priority
    ADD CONSTRAINT team_contact_incident_priority_incident_priority_id_fkey FOREIGN KEY (incident_priority_id) REFERENCES public.incident_priority(id);


--
-- Name: team_contact_incident_priority team_contact_incident_priority_team_contact_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.team_contact_incident_priority
    ADD CONSTRAINT team_contact_incident_priority_team_contact_id_fkey FOREIGN KEY (team_contact_id) REFERENCES public.team_contact(id);


--
-- Name: team_contact_incident team_contact_incident_team_contact_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.team_contact_incident
    ADD CONSTRAINT team_contact_incident_team_contact_id_fkey FOREIGN KEY (team_contact_id) REFERENCES public.team_contact(id);


--
-- Name: team_contact_incident_type team_contact_incident_type_incident_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.team_contact_incident_type
    ADD CONSTRAINT team_contact_incident_type_incident_type_id_fkey FOREIGN KEY (incident_type_id) REFERENCES public.incident_type(id);


--
-- Name: team_contact_incident_type team_contact_incident_type_team_contact_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.team_contact_incident_type
    ADD CONSTRAINT team_contact_incident_type_team_contact_id_fkey FOREIGN KEY (team_contact_id) REFERENCES public.team_contact(id);


--
-- Name: team_contact_terms team_contact_terms_team_contact_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.team_contact_terms
    ADD CONSTRAINT team_contact_terms_team_contact_id_fkey FOREIGN KEY (team_contact_id) REFERENCES public.team_contact(id);


--
-- Name: team_contact_terms team_contact_terms_term_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.team_contact_terms
    ADD CONSTRAINT team_contact_terms_term_id_fkey FOREIGN KEY (term_id) REFERENCES public.term(id);


--
-- Name: ticket ticket_incident_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.ticket
    ADD CONSTRAINT ticket_incident_id_fkey FOREIGN KEY (incident_id) REFERENCES public.incident(id);


--
-- Name: workflow_incident_priority workflow_incident_priority_incident_priority_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.workflow_incident_priority
    ADD CONSTRAINT workflow_incident_priority_incident_priority_id_fkey FOREIGN KEY (incident_priority_id) REFERENCES public.incident_priority(id);


--
-- Name: workflow_incident_priority workflow_incident_priority_workflow_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.workflow_incident_priority
    ADD CONSTRAINT workflow_incident_priority_workflow_id_fkey FOREIGN KEY (workflow_id) REFERENCES public.workflow(id);


--
-- Name: workflow_incident_type workflow_incident_type_incident_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.workflow_incident_type
    ADD CONSTRAINT workflow_incident_type_incident_type_id_fkey FOREIGN KEY (incident_type_id) REFERENCES public.incident_type(id);


--
-- Name: workflow_incident_type workflow_incident_type_workflow_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.workflow_incident_type
    ADD CONSTRAINT workflow_incident_type_workflow_id_fkey FOREIGN KEY (workflow_id) REFERENCES public.workflow(id);


--
-- Name: workflow_instance_artifact workflow_instance_artifact_document_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.workflow_instance_artifact
    ADD CONSTRAINT workflow_instance_artifact_document_id_fkey FOREIGN KEY (document_id) REFERENCES public.document(id);


--
-- Name: workflow_instance_artifact workflow_instance_artifact_workflow_instance_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.workflow_instance_artifact
    ADD CONSTRAINT workflow_instance_artifact_workflow_instance_id_fkey FOREIGN KEY (workflow_instance_id) REFERENCES public.workflow_instance(id);


--
-- Name: workflow_instance workflow_instance_creator_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.workflow_instance
    ADD CONSTRAINT workflow_instance_creator_id_fkey FOREIGN KEY (creator_id) REFERENCES public.participant(id);


--
-- Name: workflow_instance workflow_instance_incident_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.workflow_instance
    ADD CONSTRAINT workflow_instance_incident_id_fkey FOREIGN KEY (incident_id) REFERENCES public.incident(id);


--
-- Name: workflow_instance workflow_instance_workflow_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.workflow_instance
    ADD CONSTRAINT workflow_instance_workflow_id_fkey FOREIGN KEY (workflow_id) REFERENCES public.workflow(id);


--
-- Name: workflow workflow_plugin_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.workflow
    ADD CONSTRAINT workflow_plugin_id_fkey FOREIGN KEY (plugin_id) REFERENCES public.plugin(id);


--
-- Name: workflow_term workflow_term_term_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.workflow_term
    ADD CONSTRAINT workflow_term_term_id_fkey FOREIGN KEY (term_id) REFERENCES public.term(id);


--
-- Name: workflow_term workflow_term_workflow_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: dispatch
--

ALTER TABLE ONLY public.workflow_term
    ADD CONSTRAINT workflow_term_workflow_id_fkey FOREIGN KEY (workflow_id) REFERENCES public.workflow(id);


--
-- PostgreSQL database dump complete
--

