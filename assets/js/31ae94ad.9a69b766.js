"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1397],{4137:(e,t,i)=>{i.d(t,{Zo:()=>d,kt:()=>m});var o=i(7294);function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function l(e,t){if(null==e)return{};var i,o,n=function(e,t){if(null==e)return{};var i,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)i=r[o],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)i=r[o],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}var u=o.createContext({}),c=function(e){var t=o.useContext(u),i=t;return e&&(i="function"==typeof e?e(t):a(a({},t),e)),i},d=function(e){var t=c(e.components);return o.createElement(u.Provider,{value:t},e.children)},s="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},g=o.forwardRef((function(e,t){var i=e.components,n=e.mdxType,r=e.originalType,u=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),s=c(i),g=n,m=s["".concat(u,".").concat(g)]||s[g]||p[g]||r;return i?o.createElement(m,a(a({ref:t},d),{},{components:i})):o.createElement(m,a({ref:t},d))}));function m(e,t){var i=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=i.length,a=new Array(r);a[0]=g;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l[s]="string"==typeof e?e:n,a[1]=l;for(var c=2;c<r;c++)a[c]=i[c];return o.createElement.apply(null,a)}return o.createElement.apply(null,i)}g.displayName="MDXCreateElement"},5561:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>u,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var o=i(7462),n=(i(7294),i(4137));const r={description:"Configuration page for all G Suite plugins."},a="Configuring G Suite Integration",l={unversionedId:"administration/settings/plugins/configuring-g-suite",id:"administration/settings/plugins/configuring-g-suite",title:"Configuring G Suite Integration",description:"Configuration page for all G Suite plugins.",source:"@site/docs/administration/settings/plugins/configuring-g-suite.mdx",sourceDirName:"administration/settings/plugins",slug:"/administration/settings/plugins/configuring-g-suite",permalink:"/dispatch/docs/administration/settings/plugins/configuring-g-suite",draft:!1,editUrl:"https://github.com/netflix/dispatch/edit/master/docs/docs/administration/settings/plugins/configuring-g-suite.mdx",tags:[],version:"current",frontMatter:{description:"Configuration page for all G Suite plugins."},sidebar:"adminSidebar",previous:{title:"Configuring Duo",permalink:"/dispatch/docs/administration/settings/plugins/configuring-duo"},next:{title:"Configuring Jira",permalink:"/dispatch/docs/administration/settings/plugins/configuring-jira"}},u={},c=[{value:"Dispatch Configuration Variables",id:"dispatch-configuration-variables",level:2},{value:"<code>GOOGLE_DOMAIN</code> [Required]",id:"google_domain-required",level:3},{value:"<code>GOOGLE_DEVELOPER_KEY</code> [Required. Secret: True]",id:"google_developer_key-required-secret-true",level:3},{value:"<code>GOOGLE_SERVICE_ACCOUNT_CLIENT_EMAIL</code> [Required]",id:"google_service_account_client_email-required",level:3},{value:"<code>GOOGLE_SERVICE_ACCOUNT_CLIENT_ID</code> [Required]",id:"google_service_account_client_id-required",level:3},{value:"<code>GOOGLE_SERVICE_ACCOUNT_DELEGATED_ACCOUNT</code> [Required]",id:"google_service_account_delegated_account-required",level:3},{value:"<code>GOOGLE_SERVICE_ACCOUNT_PRIVATE_KEY</code> [Required. Secret: True]",id:"google_service_account_private_key-required-secret-true",level:3},{value:"<code>GOOGLE_SERVICE_ACCOUNT_PRIVATE_KEY_ID</code> [Required]",id:"google_service_account_private_key_id-required",level:3},{value:"<code>GOOGLE_SERVICE_ACCOUNT_PROJECT_ID</code> [Required]",id:"google_service_account_project_id-required",level:3},{value:"<code>GOOGLE_USER_OVERRIDE</code> [Optional. Default: None]",id:"google_user_override-optional-default-none",level:3},{value:"G Suite Setup",id:"g-suite-setup",level:2},{value:"Enable Required APIs in Google Cloud Platform",id:"enable-required-apis-in-google-cloud-platform",level:2},{value:"Connecting Dispatch to G Suite",id:"connecting-dispatch-to-g-suite",level:2}],d={toc:c},s="wrapper";function p(e){let{components:t,...i}=e;return(0,n.kt)(s,(0,o.Z)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"configuring-g-suite-integration"},"Configuring G Suite Integration"),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"Dispatch ships with several G Suite plugins ","(","Docs, Groups, Drive, etc.,",")",". This page documents the available configuration\nfor these plugins and the permissions required to enable them.")),(0,n.kt)("h2",{id:"dispatch-configuration-variables"},"Dispatch Configuration Variables"),(0,n.kt)("h3",{id:"google_domain-required"},(0,n.kt)("inlineCode",{parentName:"h3"},"GOOGLE_DOMAIN")," ","[","Required","]"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Base domain for which this Google Cloud Platform ","(","GCP",")"," service account resides.")),(0,n.kt)("h3",{id:"google_developer_key-required-secret-true"},(0,n.kt)("inlineCode",{parentName:"h3"},"GOOGLE_DEVELOPER_KEY")," ","[","Required. Secret: True","]"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"This is used by the Google API Discovery Service and prevents rate limiting.")),(0,n.kt)("h3",{id:"google_service_account_client_email-required"},(0,n.kt)("inlineCode",{parentName:"h3"},"GOOGLE_SERVICE_ACCOUNT_CLIENT_EMAIL")," ","[","Required","]"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"client_email")," value from your Google Cloud Platform ","(","GCP",")"," service account configuration file.")),(0,n.kt)("h3",{id:"google_service_account_client_id-required"},(0,n.kt)("inlineCode",{parentName:"h3"},"GOOGLE_SERVICE_ACCOUNT_CLIENT_ID")," ","[","Required","]"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"client_id")," value from your Google Cloud Platform ","(","GCP",")"," service account configuration file.")),(0,n.kt)("h3",{id:"google_service_account_delegated_account-required"},(0,n.kt)("inlineCode",{parentName:"h3"},"GOOGLE_SERVICE_ACCOUNT_DELEGATED_ACCOUNT")," ","[","Required","]"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Account to delegate to from the Google Cloud Platform ","(","GCP",")"," service account.\nOutgoing emails and other artifacts will appear to be from this account.")),(0,n.kt)("h3",{id:"google_service_account_private_key-required-secret-true"},(0,n.kt)("inlineCode",{parentName:"h3"},"GOOGLE_SERVICE_ACCOUNT_PRIVATE_KEY")," ","[","Required. Secret: True","]"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"private_key")," value from your Google Cloud Platform ","(","GCP",")"," service account configuration file.")),(0,n.kt)("h3",{id:"google_service_account_private_key_id-required"},(0,n.kt)("inlineCode",{parentName:"h3"},"GOOGLE_SERVICE_ACCOUNT_PRIVATE_KEY_ID")," ","[","Required","]"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"private_key_id")," value from your Google Cloud Platform ","(","GCP",")"," service account configuration file.")),(0,n.kt)("h3",{id:"google_service_account_project_id-required"},(0,n.kt)("inlineCode",{parentName:"h3"},"GOOGLE_SERVICE_ACCOUNT_PROJECT_ID")," ","[","Required","]"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"project_id")," value from your Google Cloud Platform ","(","GCP",")"," service account configuration file.")),(0,n.kt)("h3",{id:"google_user_override-optional-default-none"},(0,n.kt)("inlineCode",{parentName:"h3"},"GOOGLE_USER_OVERRIDE")," ","[","Optional. Default: None","]"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Used for development to funnel all emails to a specific user.")),(0,n.kt)("h2",{id:"g-suite-setup"},"G Suite Setup"),(0,n.kt)("p",null,"To set up G Suite integration, you'll need to create some resources in Google Cloud Platform and then link them to your\nG Suite organization."),(0,n.kt)("h2",{id:"enable-required-apis-in-google-cloud-platform"},"Enable Required APIs in Google Cloud Platform"),(0,n.kt)("p",null,"Navigate to the Google Cloud Platform ","(","GCP",")"," ",(0,n.kt)("a",{parentName:"p",href:"https://console.cloud.google.com/"},"console"),". You will want to\ncreate a new GCP Project for Dispatch's integration."),(0,n.kt)("p",null,"Create a new service account within the GCP project ","(","APIs & Services ",">"," Credentials ",">"," Create Credentials ",">"," Service Account",")",".\nYou do not need to assign any Google Cloud permissions to this service account when prompted."),(0,n.kt)("p",null,"Once created, download the JSON based key. You'll use these values to configure Dispatch:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"project_id")," -",">"," ",(0,n.kt)("inlineCode",{parentName:"li"},"GOOGLE_SERVICE_ACCOUNT_PROJECT_ID")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"private_key_id")," -",">"," ",(0,n.kt)("inlineCode",{parentName:"li"},"GOOGLE_SERVICE_ACCOUNT_PRIVATE_KEY_ID")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"private_key")," -",">"," ",(0,n.kt)("inlineCode",{parentName:"li"},"GOOGLE_SERVICE_ACCOUNT_PRIVATE_KEY")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"client_email")," -",">"," ",(0,n.kt)("inlineCode",{parentName:"li"},"GOOGLE_SERVICE_ACCOUNT_CLIENT_EMAIL")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"client_id")," -",">"," ",(0,n.kt)("inlineCode",{parentName:"li"},"GOOGLE_SERVICE_ACCOUNT_CLIENT_ID"))),(0,n.kt)("p",null,"Then, create a Developer API key ","(","APIs & Services ",">"," Credentials ",">"," Create Credentials ",">"," API Key",")",", and set it to the value for ",(0,n.kt)("inlineCode",{parentName:"p"},"GOOGLE_DEVELOPER_KEY"),"."),(0,n.kt)("p",null,"Enable the following APIs ","(","APIs and Services ",">"," Library",")",":"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Google Drive API"),(0,n.kt)("li",{parentName:"ul"},"Google Drive Activity API"),(0,n.kt)("li",{parentName:"ul"},"Google People API"),(0,n.kt)("li",{parentName:"ul"},"Google Docs API"),(0,n.kt)("li",{parentName:"ul"},"Google Calendar API"),(0,n.kt)("li",{parentName:"ul"},"Gmail API"),(0,n.kt)("li",{parentName:"ul"},"Admin SDK ","(","necessary to create and manage groups",")")),(0,n.kt)("p",null,"Finally, create your OAuth application which is how G Suite will authorize the service account and API key ","(","APIs & Services ",">"," OAuth Consent Screen",")",".\nSpecify the following scopes:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"https://www.googleapis.com/auth/documents\nhttps://www.googleapis.com/auth/drive\nhttps://www.googleapis.com/auth/directory.readonly\nhttps://www.googleapis.com/auth/drive.activity.readonly\nhttps://mail.google.com/\nhttps://www.googleapis.com/auth/admin.directory.group\nhttps://www.googleapis.com/auth/apps.groups.settings\nhttps://www.googleapis.com/auth/calendar\n")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Note:")," If you will not use Google Meet for your conference, then you do not need the ",(0,n.kt)("inlineCode",{parentName:"p"},"https://www.googleapis.com/auth/calendar")," scope."),(0,n.kt)("h2",{id:"connecting-dispatch-to-g-suite"},"Connecting Dispatch to G Suite"),(0,n.kt)("p",null,"Navigate to the G Suite Admin ",(0,n.kt)("a",{parentName:"p",href:"https://admin.google.com/ac/owl/domainwidedelegation"},"Domain-wide Delegation")," page\n","(","Security ",">"," API Controls ",">"," Domain-wide Delegation",")"," and add a new API client."),(0,n.kt)("p",null,"Enter the Client ID you used for ",(0,n.kt)("inlineCode",{parentName:"p"},"GOOGLE_SERVICE_ACCOUNT_CLIENT_ID"),", and then paste in a comma-separated list of the OAuth scopes above."))}p.isMDXComponent=!0}}]);